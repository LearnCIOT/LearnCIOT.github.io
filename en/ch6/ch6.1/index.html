<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>

<meta property="og:title" content="6.1. Machine Learning Preliminaries"/>
<meta property="og:description" content="We use air quality and water level data, combined with weather observations, using machine learning for data classification and data grouping. We demonstrate the standard process of machine learning and introduce how to further predict data through data classification and how to further explore data through data grouping."/>
<meta property="og:image" content="https://learnciot.github.io/images/thumbnail.jpg"/>
<meta property="og:url" content="/en/ch6/ch6.1/"/>
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="627" />
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.104.3">
    <meta name="generator" content="Relearn 5.3.3+tip">
    <meta name="description" content="We use air quality and water level data, combined with weather observations, using machine learning for data classification and data grouping. We demonstrate the standard process of machine learning and introduce how to further predict data through data classification and how to further explore data through data grouping.">
    <meta name="author" content="Ling-Jyh Chen">
    <title>6.1. Machine Learning Preliminaries :: Tutorial for CIoT Open Data Applications</title>
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="/css/fontawesome-all.min.css?1697343146" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fontawesome-all.min.css?1697343146" rel="stylesheet"></noscript>
    <link href="/css/featherlight.min.css?1697343146" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/featherlight.min.css?1697343146" rel="stylesheet"></noscript>
    <link href="/css/auto-complete.css?1697343146" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/auto-complete.css?1697343146" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar.min.css?1697343146" rel="stylesheet">
    <link href="/css/nucleus.css?1697343146" rel="stylesheet">
    <link href="/css/fonts.css?1697343146" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/css/fonts.css?1697343146" rel="stylesheet"></noscript>
    <link href="/css/theme.css?1697343146" rel="stylesheet">
    <link href="/css/theme-relearn-light.css?1697343146" rel="stylesheet" id="variant-style">
    <link href="/css/ie.css?1697343146" rel="stylesheet">
    <link href="/css/variant.css?1697343146" rel="stylesheet">
    <link href="/css/print.css?1697343146" rel="stylesheet" media="print">
    <script src="/js/variant.js?1697343146"></script>
    <script>
      // hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic:
      // https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72
      var index_url="/en/index.json";
      var root_url="/";
      var baseUri=root_url.replace(/\/$/, '');
      // translations
      window.T_Copy_to_clipboard = 'Copy to clipboard';
      window.T_Copied_to_clipboard = 'Copied to clipboard!';
      window.T_Copy_link_to_clipboard = 'Copy link to clipboard';
      window.T_Link_copied_to_clipboard = 'Copied link to clipboard!';
      // some further base stuff
      var baseUriFull='https:\/\/LearnCIOT.github.io/';
      window.variants && variants.init( [ 'relearn-light' ] );
    </script>
    <script src="/js/jquery.min.js?1697343146" defer></script>
<meta property="fb:app_id" content="601826851395774" />
  </head>
  <body class="default-animation" data-url="/en/ch6/ch6.1/">




<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v14.0" nonce="hWjBXHAv"></script>

    <div id="body" class="default-animation">
      <div id="sidebar-overlay"></div>
      <div id="toc-overlay"></div>
      <nav id="topbar" class="highlightable">
        <div>
          <div class="navigation">
             <a class="nav nav-next" href="/en/ch6/ch6.2/" title="6.2. Anomaly Detection"><i class="fas fa-chevron-right fa-fw"></i></a>
          </div>
          <div class="navigation">
             <a class="nav nav-prev" href="/en/ch6/" title="6. Data Applications"><i class="fas fa-chevron-left fa-fw"></i></a>
          </div>
          <div id="top-github-link">
            <a class="github-link" title='Edit' href="https://github.com/LearnCIOT/LearnCIOT.github.io/tree/main/content/ch6/ch6.1/index.en.md" target="blank">
              <i class="fas fa-pen fa-fw"></i>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" title='Menu'><i class="fas fa-bars fa-fw"></i></a>
            </span>
            <span id="toc-menu" title='Table of Contents'><i class="fas fa-list-alt fa-fw"></i></span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <meta itemprop="itemListOrder" content="Descending" />
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="3" /><a itemprop="item" href="/en/"><span itemprop="name">Learning Civil IoT Taiwan Open Data and Its Applications</span></a> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="2" /><a itemprop="item" href="/en/ch6/"><span itemprop="name">6. Data Applications</span></a> > </li>
              <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="1" /><a itemprop="item" href="/en/ch6/ch6.1/" aria-disabled="true"><span itemprop="name">6.1. Machine Learning Preliminaries</span></a></li>
            </ol>
          </div>
          <div class="default-animation progress">
            <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#preamble">Preamble</a>
      <ul>
        <li><a href="#classification">Classification</a></li>
        <li><a href="#clustering">Clustering</a></li>
      </ul>
    </li>
    <li><a href="#package-installation-and-importing">Package Installation and Importing</a></li>
    <li><a href="#case-1-location-type-classification-of-air-quality-sensors">Case 1: Location Type Classification of Air Quality Sensors</a>
      <ul>
        <li><a href="#data-cleansing">Data Cleansing</a></li>
        <li><a href="#outlier-removal">Outlier removal</a></li>
        <li><a href="#train-data-and-test-data">Train data and test data</a></li>
        <li><a href="#using-the-pre-built-sklearn-models">Using the pre-built Sklearn models</a></li>
      </ul>
    </li>
    <li><a href="#case-2-clustering-of-air-quality-sensors">Case 2: Clustering of Air Quality Sensors</a>
      <ul>
        <li><a href="#data-download-and-preprocessing">Data download and preprocessing</a></li>
        <li><a href="#dynamic-time-warping-dtw">Dynamic Time Warping (DTW)</a></li>
        <li><a href="#k-mean-clustering">K-Mean clustering</a></li>
        <li><a href="#correlation-between-data-clusters-and-geographical-locations">Correlation between data clusters and geographical locations</a></li>
        <li><a href="#correlation-between-data-clusters-and-wind-directions">Correlation between data clusters and wind directions</a></li>
      </ul>
    </li>
    <li><a href="#case-3-clustering-and-classification-application-of-water-and-meteorological-data">Case 3: Clustering and Classification Application of Water and Meteorological Data</a>
      <ul>
        <li><a href="#data-download-and-preprocessing-1">Data download and preprocessing</a></li>
        <li><a href="#correlation-of-flood-sensors-and-rain-gauges">Correlation of flood sensors and rain gauges</a></li>
        <li><a href="#data-clustering-to-find-highly-correlated-rain-gauges">Data clustering to find highly correlated rain gauges</a></li>
        <li><a href="#data-classification-to-predict-flooding-by-rainfall-data">Data classification to predict flooding by rainfall data</a></li>
      </ul>
    </li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
            </div>
          </div>
        </div>
      </nav>

      <main id="body-inner" class="highlightable ">
        <div class="flex-block-wrapper">
          <div id="head-tags"><div class="tags">
  <a class="level-link" href="/en/levels/intermediate">
  <b>
	&starf;&starf;&starf;&star;&star;
  </b>
  </a>
  <a class="tag-link" href="/en/tags/air">Air</a>
  <a class="tag-link" href="/en/tags/python">Python</a>
  <a class="tag-link" href="/en/tags/water">Water</a>
</div>

          </div>


  
  
  

  <section class="social-share">
    <ul class="share-icons">
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?hashtags=codingnconcepts&amp;url=https%3a%2f%2fLearnCIOT.github.io%2fen%2fch6%2fch6.1%2f&amp;text=6.1.%20Machine%20Learning%20Preliminaries" target="_blank" rel="noopener" aria-label="Share on Twitter" class="share-btn twitter">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="26px" viewBox="0 0 31 26" version="1.1">
<g id="surface1">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(11.372549%,60.784314%,94.117647%);fill-opacity:1;" d="M 27.742188 6.535156 C 27.761719 6.8125 27.761719 7.089844 27.761719 7.371094 C 27.761719 15.875 21.414062 25.683594 9.800781 25.683594 L 9.800781 25.675781 C 6.371094 25.683594 3.011719 24.679688 0.125 22.792969 C 0.625 22.851562 1.125 22.882812 1.628906 22.886719 C 4.46875 22.886719 7.230469 21.914062 9.46875 20.125 C 6.765625 20.070312 4.398438 18.277344 3.570312 15.65625 C 4.515625 15.839844 5.492188 15.800781 6.421875 15.542969 C 3.476562 14.9375 1.355469 12.300781 1.355469 9.234375 L 1.355469 9.152344 C 2.234375 9.652344 3.214844 9.929688 4.222656 9.960938 C 1.449219 8.070312 0.59375 4.304688 2.265625 1.363281 C 5.472656 5.386719 10.203125 7.832031 15.277344 8.089844 C 14.769531 5.855469 15.464844 3.511719 17.105469 1.941406 C 19.644531 -0.496094 23.644531 -0.371094 26.035156 2.21875 C 27.449219 1.933594 28.804688 1.40625 30.042969 0.65625 C 29.574219 2.144531 28.585938 3.410156 27.269531 4.214844 C 28.519531 4.066406 29.742188 3.722656 30.894531 3.203125 C 30.046875 4.496094 28.980469 5.625 27.742188 6.535156 Z M 27.742188 6.535156 "/>
</g>
</svg>

          <p>Twitter</p>
          </a>
      </li>
      

      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fLearnCIOT.github.io%2fen%2fch6%2fch6.1%2f" target="_blank" rel="noopener" aria-label="Share on Facebook" class="share-btn facebook">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="32px" viewBox="0 0 32 32" version="1.1">
<defs>
<linearGradient id="linear0" gradientUnits="userSpaceOnUse" x1="-277.375" y1="406.6018" x2="-277.375" y2="407.5726" gradientTransform="matrix(32,0,0,-31.82224,8892.0008,12969.8672)">
<stop offset="0" style="stop-color:rgb(0%,38.431373%,87.843137%);stop-opacity:1;"/>
<stop offset="1" style="stop-color:rgb(9.803922%,68.627451%,100%);stop-opacity:1;"/>
</linearGradient>
</defs>
<g id="surface1">
<path style=" stroke:none;fill-rule:nonzero;fill:url(#linear0);" d="M 13.359375 31.839844 C 5.761719 30.480469 0 23.921875 0 16 C 0 7.199219 7.199219 0 16 0 C 24.800781 0 32 7.199219 32 16 C 32 23.921875 26.238281 30.480469 18.640625 31.839844 L 17.761719 31.121094 L 14.238281 31.121094 Z M 13.359375 31.839844 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 22.238281 20.480469 L 22.960938 16 L 18.71875 16 L 18.71875 12.878906 C 18.71875 11.601562 19.199219 10.640625 21.121094 10.640625 L 23.199219 10.640625 L 23.199219 6.558594 C 22.078125 6.398438 20.800781 6.238281 19.679688 6.238281 C 16 6.238281 13.441406 8.480469 13.441406 12.480469 L 13.441406 16 L 9.441406 16 L 9.441406 20.480469 L 13.441406 20.480469 L 13.441406 31.761719 C 14.320312 31.921875 15.199219 32 16.078125 32 C 16.960938 32 17.839844 31.921875 18.71875 31.761719 L 18.71875 20.480469 Z M 22.238281 20.480469 "/>
</g>
</svg>

          <p>Facebook</p>
          </a>
      </li>
      

      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fLearnCIOT.github.io%2fen%2fch6%2fch6.1%2f&amp;source=https%3a%2f%2fLearnCIOT.github.io%2fen%2fch6%2fch6.1%2f&amp;title=6.1.%20Machine%20Learning%20Preliminaries&amp;summary=6.1.%20Machine%20Learning%20Preliminaries" target="_blank" rel="noopener" aria-label="Share on LinkedIn" class="share-btn linkedin">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="32px" viewBox="0 0 32 32" version="1.1">
<g id="surface1">
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(0%,49.411765%,73.333333%);fill-opacity:1;" d="M 16 32 C 24.835938 32 32 24.835938 32 16 C 32 7.164062 24.835938 0 16 0 C 7.164062 0 0 7.164062 0 16 C 0 24.835938 7.164062 32 16 32 Z M 16 32 "/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 26.222656 25.332031 L 22.203125 25.332031 L 22.203125 18.488281 C 22.203125 16.613281 21.492188 15.566406 20.007812 15.566406 C 18.390625 15.566406 17.546875 16.65625 17.546875 18.488281 L 17.546875 25.332031 L 13.675781 25.332031 L 13.675781 12.296875 L 17.546875 12.296875 L 17.546875 14.050781 C 17.546875 14.050781 18.710938 11.898438 21.476562 11.898438 C 24.242188 11.898438 26.222656 13.585938 26.222656 17.078125 Z M 9.054688 10.589844 C 7.734375 10.589844 6.667969 9.511719 6.667969 8.183594 C 6.667969 6.855469 7.734375 5.777344 9.054688 5.777344 C 10.375 5.777344 11.441406 6.855469 11.441406 8.183594 C 11.441406 9.511719 10.375 10.589844 9.054688 10.589844 Z M 7.054688 25.332031 L 11.09375 25.332031 L 11.09375 12.296875 L 7.054688 12.296875 Z M 7.054688 25.332031 "/>
</g>
</svg>

            <p>LinkedIn</p>
          </a>
      </li>
      

      
      
      <li>
        <a href="whatsapp://send?text=6.1.%20Machine%20Learning%20Preliminaries%2c%20by%20Tutorial%20for%20CIoT%20Open%20Data%20Applications%0aWe%20use%20air%20quality%20and%20water%20level%20data%2c%20combined%20with%20weather%20observations%2c%20using%20machine%20learning%20for%20data%20classification%20and%20data%20grouping.%20We%20demonstrate%20the%20standard%20process%20of%20machine%20learning%20and%20introduce%20how%20to%20further%20predict%20data%20through%20data%20classification%20and%20how%20to%20further%20explore%20data%20through%20data%20grouping.%0a%0ahttps%3a%2f%2fLearnCIOT.github.io%2fen%2fch6%2fch6.1%2f%0a" target="_blank" class="share-btn whatsapp">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="32px" viewBox="0 0 32 32" version="1.1">
<defs>
<image id="image5" width="588" height="590" xlink:href="data:image/png;base64,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"/>
</defs>
<g id="surface2">
<use xlink:href="#image5" transform="matrix(0.054145,0,0,0.054145,0.054145,0)"/>
<path style=" stroke:none;fill-rule:evenodd;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 24.355469 7.726562 C 22.222656 5.585938 19.378906 4.410156 16.355469 4.40625 C 10.117188 4.40625 5.042969 9.484375 5.042969 15.71875 C 5.039062 17.714844 5.5625 19.660156 6.550781 21.375 L 4.945312 27.238281 L 10.945312 25.664062 C 12.597656 26.566406 14.457031 27.039062 16.351562 27.042969 L 16.355469 27.042969 C 22.589844 27.042969 27.664062 21.964844 27.667969 15.730469 C 27.667969 12.707031 26.492188 9.863281 24.355469 7.726562 Z M 16.355469 25.132812 L 16.351562 25.132812 C 14.664062 25.128906 13.007812 24.675781 11.566406 23.820312 L 11.222656 23.617188 L 7.664062 24.550781 L 8.613281 21.082031 L 8.390625 20.722656 C 7.449219 19.226562 6.949219 17.496094 6.953125 15.71875 C 6.953125 10.535156 11.171875 6.320312 16.359375 6.320312 C 18.871094 6.320312 21.230469 7.296875 23.003906 9.074219 C 24.78125 10.851562 25.757812 13.214844 25.757812 15.726562 C 25.753906 20.914062 21.535156 25.132812 16.355469 25.132812 Z M 21.511719 18.089844 C 21.230469 17.945312 19.839844 17.261719 19.582031 17.167969 C 19.320312 17.074219 19.132812 17.027344 18.945312 17.3125 C 18.757812 17.59375 18.214844 18.230469 18.050781 18.417969 C 17.882812 18.609375 17.71875 18.632812 17.4375 18.488281 C 17.152344 18.347656 16.242188 18.050781 15.164062 17.085938 C 14.324219 16.335938 13.757812 15.410156 13.589844 15.128906 C 13.425781 14.84375 13.574219 14.691406 13.714844 14.550781 C 13.84375 14.425781 13.996094 14.222656 14.140625 14.054688 C 14.28125 13.890625 14.328125 13.773438 14.421875 13.585938 C 14.515625 13.394531 14.46875 13.230469 14.398438 13.089844 C 14.328125 12.949219 13.761719 11.554688 13.527344 10.992188 C 13.296875 10.441406 13.066406 10.515625 12.890625 10.503906 C 12.726562 10.496094 12.539062 10.496094 12.347656 10.496094 C 12.160156 10.496094 11.855469 10.566406 11.59375 10.847656 C 11.335938 11.132812 10.605469 11.816406 10.605469 13.207031 C 10.605469 14.597656 11.617188 15.941406 11.761719 16.132812 C 11.902344 16.320312 13.753906 19.175781 16.589844 20.398438 C 17.261719 20.691406 17.789062 20.863281 18.199219 20.996094 C 18.878906 21.210938 19.492188 21.179688 19.980469 21.105469 C 20.523438 21.027344 21.652344 20.421875 21.890625 19.761719 C 22.125 19.101562 22.125 18.535156 22.054688 18.417969 C 21.984375 18.300781 21.792969 18.230469 21.511719 18.089844 Z M 21.511719 18.089844 "/>
</g>
</svg>

          <p>Email</p>
        </a>
      </li>
      

      
      
      <li>
        <a href="mailto:?subject=Tutorial%20for%20CIoT%20Open%20Data%20Applications - 6.1.%20Machine%20Learning%20Preliminaries.&amp;body=6.1.%20Machine%20Learning%20Preliminaries%2c%20by%20Tutorial%20for%20CIoT%20Open%20Data%20Applications%0aWe%20use%20air%20quality%20and%20water%20level%20data%2c%20combined%20with%20weather%20observations%2c%20using%20machine%20learning%20for%20data%20classification%20and%20data%20grouping.%20We%20demonstrate%20the%20standard%20process%20of%20machine%20learning%20and%20introduce%20how%20to%20further%20predict%20data%20through%20data%20classification%20and%20how%20to%20further%20explore%20data%20through%20data%20grouping.%0a%0ahttps%3a%2f%2fLearnCIOT.github.io%2fen%2fch6%2fch6.1%2f%0a" target="_blank" class="share-btn email">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="32px" viewBox="0 0 32 32" version="1.1">
<defs>
<filter id="alpha" filterUnits="objectBoundingBox" x="0%" y="0%" width="100%" height="100%">
  <feColorMatrix type="matrix" in="SourceGraphic" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 1 0"/>
</filter>
<mask id="mask0">
  <g filter="url(#alpha)">
<rect x="0" y="0" width="32" height="32" style="fill:rgb(0%,0%,0%);fill-opacity:0.2;stroke:none;"/>
  </g>
</mask>
<clipPath id="clip1">
  <rect x="0" y="0" width="32" height="32"/>
</clipPath>
<g id="surface5" clip-path="url(#clip1)">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(13.72549%,12.156863%,12.54902%);fill-opacity:1;" d="M 26 22 C 26 23.101562 25.101562 24 24 24 L 8 24 C 6.898438 24 6 23.101562 6 22 L 6 12 C 6 10.898438 6.898438 10 8 10 L 24 10 C 25.101562 10 26 10.898438 26 12 Z M 26 22 "/>
</g>
<mask id="mask1">
  <g filter="url(#alpha)">
<rect x="0" y="0" width="32" height="32" style="fill:rgb(0%,0%,0%);fill-opacity:0.2;stroke:none;"/>
  </g>
</mask>
<clipPath id="clip2">
  <rect x="0" y="0" width="32" height="32"/>
</clipPath>
<g id="surface8" clip-path="url(#clip2)">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(13.72549%,12.156863%,12.54902%);fill-opacity:1;" d="M 17.75 15.101562 C 16.800781 14.050781 15.199219 14.050781 14.25 15.101562 L 6.5 21.601562 C 6.398438 21.699219 6.351562 21.800781 6.25 21.898438 C 6.601562 22.550781 7.25 23 7.949219 23 L 23.949219 23 C 24.699219 23 25.300781 22.550781 25.648438 21.898438 C 25.601562 21.800781 25.5 21.699219 25.398438 21.601562 Z M 17.75 15.101562 "/>
</g>
<mask id="mask2">
  <g filter="url(#alpha)">
<rect x="0" y="0" width="32" height="32" style="fill:rgb(0%,0%,0%);fill-opacity:0.2;stroke:none;"/>
  </g>
</mask>
<clipPath id="clip3">
  <rect x="0" y="0" width="32" height="32"/>
</clipPath>
<g id="surface11" clip-path="url(#clip3)">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(13.72549%,12.156863%,12.54902%);fill-opacity:1;" d="M 6.300781 10.101562 C 6.648438 9.449219 7.300781 9 8 9 L 24 9 C 24.75 9 25.351562 9.449219 25.699219 10.101562 C 25.648438 10.199219 25.550781 10.300781 25.449219 10.398438 L 17.75 16.898438 C 16.800781 17.949219 15.199219 17.949219 14.25 16.898438 Z M 6.300781 10.101562 "/>
</g>
</defs>
<g id="surface1">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(46.666667%,70.196078%,83.137255%);fill-opacity:1;" d="M 32 16 C 32 24.835938 24.835938 32 16 32 C 7.164062 32 0 24.835938 0 16 C 0 7.164062 7.164062 0 16 0 C 24.835938 0 32 7.164062 32 16 Z M 32 16 "/>
<use xlink:href="#surface5" mask="url(#mask0)"/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(87.843137%,87.843137%,81.960784%);fill-opacity:1;" d="M 26 21 C 26 22.101562 25.101562 23 24 23 L 8 23 C 6.898438 23 6 22.101562 6 21 L 6 11 C 6 9.898438 6.898438 9 8 9 L 24 9 C 25.101562 9 26 9.898438 26 11 Z M 26 21 "/>
<use xlink:href="#surface8" mask="url(#mask1)"/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(87.843137%,87.843137%,81.960784%);fill-opacity:1;" d="M 17.75 16 C 16.800781 15.050781 15.199219 15.050781 14.25 16 L 6.5 21.75 C 6.398438 21.851562 6.351562 21.898438 6.25 22 C 6.601562 22.601562 7.25 22.949219 7.949219 22.949219 L 23.949219 22.949219 C 24.699219 22.949219 25.300781 22.550781 25.648438 22 C 25.601562 21.898438 25.5 21.851562 25.398438 21.75 Z M 17.75 16 "/>
<use xlink:href="#surface11" mask="url(#mask2)"/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 14.25 16 C 15.199219 16.949219 16.800781 16.949219 17.75 16 L 25.5 10.25 C 25.601562 10.148438 25.648438 10.101562 25.75 10 C 25.398438 9.398438 24.75 9.050781 24.050781 9.050781 L 8 9.050781 C 7.25 9.050781 6.648438 9.449219 6.300781 10 C 6.351562 10.101562 6.449219 10.148438 6.550781 10.25 Z M 14.25 16 "/>
</g>
</svg>

          <p>Email</p>
        </a>
      </li>
    </ul>
  </section>
  



<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZCH7EJS8LE"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-ZCH7EJS8LE', { 'anonymize_ip': false });
}
</script>



          <article class="default">
<h1>6.1. Machine Learning Preliminaries</h1>

<p><a href="https://colab.research.google.com/drive/14xfpf7Nv_1uadSeJh3vC61HL7r4z6KT8?usp=sharing"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a></p>
<div>
    <h2>Table Of Contents</h2>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#preamble">Preamble</a>
      <ul>
        <li><a href="#classification">Classification</a></li>
        <li><a href="#clustering">Clustering</a></li>
      </ul>
    </li>
    <li><a href="#package-installation-and-importing">Package Installation and Importing</a></li>
    <li><a href="#case-1-location-type-classification-of-air-quality-sensors">Case 1: Location Type Classification of Air Quality Sensors</a>
      <ul>
        <li><a href="#data-cleansing">Data Cleansing</a></li>
        <li><a href="#outlier-removal">Outlier removal</a></li>
        <li><a href="#train-data-and-test-data">Train data and test data</a></li>
        <li><a href="#using-the-pre-built-sklearn-models">Using the pre-built Sklearn models</a></li>
      </ul>
    </li>
    <li><a href="#case-2-clustering-of-air-quality-sensors">Case 2: Clustering of Air Quality Sensors</a>
      <ul>
        <li><a href="#data-download-and-preprocessing">Data download and preprocessing</a></li>
        <li><a href="#dynamic-time-warping-dtw">Dynamic Time Warping (DTW)</a></li>
        <li><a href="#k-mean-clustering">K-Mean clustering</a></li>
        <li><a href="#correlation-between-data-clusters-and-geographical-locations">Correlation between data clusters and geographical locations</a></li>
        <li><a href="#correlation-between-data-clusters-and-wind-directions">Correlation between data clusters and wind directions</a></li>
      </ul>
    </li>
    <li><a href="#case-3-clustering-and-classification-application-of-water-and-meteorological-data">Case 3: Clustering and Classification Application of Water and Meteorological Data</a>
      <ul>
        <li><a href="#data-download-and-preprocessing-1">Data download and preprocessing</a></li>
        <li><a href="#correlation-of-flood-sensors-and-rain-gauges">Correlation of flood sensors and rain gauges</a></li>
        <li><a href="#data-clustering-to-find-highly-correlated-rain-gauges">Data clustering to find highly correlated rain gauges</a></li>
        <li><a href="#data-classification-to-predict-flooding-by-rainfall-data">Data classification to predict flooding by rainfall data</a></li>
      </ul>
    </li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
</div>

<h2 id="preamble">Preamble</h2>
<p>In the previous chapters, we have introduced the rich open data content of Civil IoT Taiwan. At the same time, we have presented various data analyses and processing from the perspective of time and space dimensions. In this chapter, we will further explore applications of machine learning and introduces two classic machine learning problems, namely the classification problem and the clustering problem.</p>
<h3 id="classification">Classification</h3>
<p>Classification problems are classic problems in machine learning theory. If we describe this problem more mathematically, we can assume that a set of data <code>X</code> has been classified, and the label set <code>Y</code> is obtained after each data is classified. The classification problem is constructing an effective classifier through this set of classified data and labels, which can find the corresponding label <code>Y'</code> for each piece of data from the unclassified data <code>X'</code>.</p>
<p>Therefore, the focus of classification problems is to construct an efficient classifier. We will first build a model and use the labeled data for training to achieve this goal. Our goal is to make the model as close as possible to fit the distribution of these data and then use the final product model as a classifier to infer labels for unknown data.</p>
<p>This process of building a classifier is called supervised learning in machine learning. Standard classifier models include the <em><a href="https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm">Nearest Neighbors</a></em>, <em><a href="https://en.wikipedia.org/wiki/Support-vector_machine">SVM Classifier</a></em>, <em><a href="https://en.wikipedia.org/wiki/Decision_tree">Decision Tree</a></em>, <em><a href="https://en.wikipedia.org/wiki/Random_forest">Random Forest</a></em>, etc. In our later articles, we will not explain each model in depth but will only use these models directly as tools. Readers interested in these models can refer to relevant resources and do more in-depth exploration.</p>
<h3 id="clustering">Clustering</h3>
<p>Clustering problems are very similar to classification problems. The main difference is that the classification problem uses labeled known data to infer unknown data, while clustering problems are entirely &ldquo;out of thin air,&rdquo; forming data into different groupings.</p>
<p>If we describe this problem more mathematically, we can assume that there is a set of entirely unlabeled data <code>X</code>. The clustering problem is to divide the data of <code>X</code> into <code>k</code> groups through a particular algorithm. The data in each data group has High similarity, while data within different groups are highly diverse.</p>
<p>The clustering algorithms are mainly based on the characteristics of the data and constantly judge the similarity and dissimilarities between the data. Then, they let similar data gathered together and made the different data mutually exclusive in the distribution. Standard clustering algorithms include <a href="https://en.wikipedia.org/wiki/K-means_clustering">K-Means</a>, <a href="https://en.wikipedia.org/wiki/DBSCAN">DBSCAN</a>, <a href="https://en.wikipedia.org/wiki/Hierarchical_clustering">Hierarchical Clustering</a>, <a href="https://en.wikipedia.org/wiki/BIRCH">BIRCH</a>, etc. In our later articles, we will not explain each model in depth but will only use these models directly as tools. Readers interested in these models can refer to relevant resources and explore them more in-depth.</p>
<h2 id="package-installation-and-importing">Package Installation and Importing</h2>
<p>In this article, we will use the andas, numpy, matplotlib, json, os, glob, math, seaborn, tqdm, datetime,  geopy, scipy, and warnings packages, which are pre-installed on our development platform, Google Colab, and do not need to be installed manually. However, we will also use three additional packages that Colab does not have pre-installed: pyCIOT, fastdtw and sklearn, as well as the TaipeiSansTCBeta-Regular font, which need to be installed by :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>pip3 install fastdtw <span style="color:#f92672">--</span>quiet
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>pip3 install scikit<span style="color:#f92672">-</span>learn <span style="color:#f92672">--</span>quiet
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>pip3 install pyCIOT <span style="color:#f92672">--</span>quiet
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>wget <span style="color:#f92672">-</span>q <span style="color:#f92672">-</span>O TaipeiSansTCBeta<span style="color:#f92672">-</span>Regular<span style="color:#f92672">.</span>ttf https:<span style="color:#f92672">//</span>drive<span style="color:#f92672">.</span>google<span style="color:#f92672">.</span>com<span style="color:#f92672">/</span>uc<span style="color:#960050;background-color:#1e0010">?</span>id<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>eGAsTN1HBpJAkeVM57_C7ccp7hbgSz3_<span style="color:#f92672">&amp;</span>export<span style="color:#f92672">=</span>download
</span></span></code></pre></div><p>After the installation is complete, we can use the following syntax to import the relevant packages to complete the preparations in this article.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> pyCIOT.data <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> json<span style="color:#f92672">,</span> os<span style="color:#f92672">,</span> glob<span style="color:#f92672">,</span> math
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib <span style="color:#66d9ef">as</span> mpl
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> matplotlib.font_manager <span style="color:#f92672">import</span> fontManager
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> tqdm <span style="color:#f92672">import</span> tqdm_notebook <span style="color:#66d9ef">as</span> tqdm
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime, timedelta
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> seaborn <span style="color:#66d9ef">as</span> sns
</span></span><span style="display:flex;"><span>sns<span style="color:#f92672">.</span>set(font_scale<span style="color:#f92672">=</span><span style="color:#ae81ff">0.8</span>)
</span></span><span style="display:flex;"><span>fontManager<span style="color:#f92672">.</span>addfont(<span style="color:#e6db74">&#39;TaipeiSansTCBeta-Regular.ttf&#39;</span>)
</span></span><span style="display:flex;"><span>mpl<span style="color:#f92672">.</span>rc(<span style="color:#e6db74">&#39;font&#39;</span>, family<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Taipei Sans TC Beta&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> warnings
</span></span><span style="display:flex;"><span>warnings<span style="color:#f92672">.</span>simplefilter(action<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ignore&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> geopy.distance
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> scipy.spatial.distance <span style="color:#f92672">import</span> euclidean
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> fastdtw <span style="color:#f92672">import</span> fastdtw
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> sklearn
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.metrics <span style="color:#f92672">import</span> accuracy_score, confusion_matrix
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.neural_network <span style="color:#f92672">import</span> MLPClassifier
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.neighbors <span style="color:#f92672">import</span> KNeighborsClassifier
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.svm <span style="color:#f92672">import</span> SVC
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.gaussian_process.kernels <span style="color:#f92672">import</span> RBF
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.tree <span style="color:#f92672">import</span> DecisionTreeClassifier
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.ensemble <span style="color:#f92672">import</span> RandomForestClassifier, AdaBoostClassifier
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.naive_bayes <span style="color:#f92672">import</span> GaussianNB
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.discriminant_analysis <span style="color:#f92672">import</span> QuadraticDiscriminantAnalysis
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.cluster <span style="color:#f92672">import</span> KMeans
</span></span></code></pre></div><p>Next, we use the water level and air quality data of Civil IoT Taiwan to introduce data classification and clustering.</p>
<h2 id="case-1-location-type-classification-of-air-quality-sensors">Case 1: Location Type Classification of Air Quality Sensors</h2>
<p>In this case, we use the data of the Environmental Protection Agency’s micro air quality sensors (‘<code>OBS:EPA_IoT</code>’) in Civil IoT Taiwan to demonstrate data classification.</p>
<p>We first use the <code>Air().get_data()</code> method provided by pyCIOT to download the latest sensing data of all EPA micro air quality sensors. Note that this step may take a little longer due to a large amount of content.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Source <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;OBS:EPA_IoT&#39;</span>
</span></span><span style="display:flex;"><span>Data <span style="color:#f92672">=</span> Air()<span style="color:#f92672">.</span>get_data(src<span style="color:#f92672">=</span>Source)
</span></span><span style="display:flex;"><span>Data <span style="color:#f92672">=</span> [datapoint <span style="color:#66d9ef">for</span> datapoint <span style="color:#f92672">in</span> Data <span style="color:#66d9ef">if</span> len(datapoint[<span style="color:#e6db74">&#39;data&#39;</span>]) <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">and</span> <span style="color:#e6db74">&#39;areaType&#39;</span> <span style="color:#f92672">in</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>]<span style="color:#f92672">.</span>keys()]
</span></span><span style="display:flex;"><span>print(json<span style="color:#f92672">.</span>dumps(Data[<span style="color:#ae81ff">0</span>], indent<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, ensure_ascii<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>))
</span></span></code></pre></div><pre tabindex="0"><code>{
    &#34;name&#34;: &#34;智慧城鄉空品微型感測器-10287974676&#34;,
    &#34;description&#34;: &#34;智慧城鄉空品微型感測器-10287974676&#34;,
    &#34;properties&#34;: {
        &#34;city&#34;: &#34;新北市&#34;,
        &#34;areaType&#34;: &#34;社區&#34;,
        &#34;isMobile&#34;: &#34;false&#34;,
        &#34;township&#34;: &#34;鶯歌區&#34;,
        &#34;authority&#34;: &#34;行政院環境保護署&#34;,
        &#34;isDisplay&#34;: &#34;true&#34;,
        &#34;isOutdoor&#34;: &#34;true&#34;,
        &#34;stationID&#34;: &#34;10287974676&#34;,
        &#34;locationId&#34;: &#34;TW040203A0507221&#34;,
        &#34;Description&#34;: &#34;廣域SAQ-210&#34;,
        &#34;areaDescription&#34;: &#34;鶯歌區&#34;
    },
    &#34;data&#34;: [
        {
            &#34;name&#34;: &#34;Relative humidity&#34;,
            &#34;description&#34;: &#34;相對溼度&#34;,
            &#34;timestamp&#34;: &#34;2022-08-05T06:51:29.000Z&#34;,
            &#34;value&#34;: 70.77
        },
        {
            &#34;name&#34;: &#34;Temperature&#34;,
            &#34;description&#34;: &#34;溫度&#34;,
            &#34;timestamp&#34;: &#34;2022-08-05T06:51:29.000Z&#34;,
            &#34;value&#34;: 33.78
        },
        {
            &#34;name&#34;: &#34;PM2.5&#34;,
            &#34;description&#34;: &#34;細懸浮微粒 PM2.5&#34;,
            &#34;timestamp&#34;: &#34;2022-08-05T06:51:29.000Z&#34;,
            &#34;value&#34;: 9.09
        }
    ],
    &#34;location&#34;: {
        &#34;latitude&#34;: 24.9507,
        &#34;longitude&#34;: 121.3408416,
        &#34;address&#34;: null
    }
}
</code></pre><p>We can find that in the data of each sensor, there is information such as temperature, relative humidity, and PM2.5 concentration. At the same time, the basic knowledge of the sensor is also recorded, such as city, town, machine number, location number, area type, etc. In our example, we will use &ldquo;location type&rdquo; as label data and train a classifier using sensory data (temperature, relative humidity, and PM2.5 concentration). We first observe the content state of the current &ldquo;AreaType.”</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Label <span style="color:#f92672">=</span> list(dict<span style="color:#f92672">.</span>fromkeys([datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#66d9ef">for</span> datapoint <span style="color:#f92672">in</span> Data <span style="color:#66d9ef">if</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>]]))
</span></span><span style="display:flex;"><span>count <span style="color:#f92672">=</span> dict<span style="color:#f92672">.</span>fromkeys(Label, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> datapoint <span style="color:#f92672">in</span> Data:
</span></span><span style="display:flex;"><span>    count[datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>]] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Before data cleaning, There are </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> records.&#34;</span><span style="color:#f92672">.</span>format(len(Data)))
</span></span><span style="display:flex;"><span>print(json<span style="color:#f92672">.</span>dumps(count, indent<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, ensure_ascii<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>))
</span></span></code></pre></div><pre tabindex="0"><code>Before data cleaning, There are 8620 records.
{
    &#34;社區&#34;: 223,
    &#34;交通&#34;: 190,
    &#34;一般社區&#34;: 2021,
    &#34;工業&#34;: 12,
    &#34;測站比對&#34;: 66,
    &#34;工業區&#34;: 3333,
    &#34;交通區&#34;: 683,
    &#34;鄰近工業區社區&#34;: 948,
    &#34;輔助區&#34;: 165,
    &#34;特殊區(民眾陳情熱區)&#34;: 143,
    &#34;特殊區(敏感族群聚集區)&#34;: 200,
    &#34;特殊區(測站比對)&#34;: 32,
    &#34;輔助區(無測站區)&#34;: 4,
    &#34;工業感測&#34;: 196,
    &#34;特殊感測&#34;: 4,
    &#34;輔助感測&#34;: 295,
    &#34;交通感測&#34;: 102,
    &#34;機動感測&#34;: 2,
    &#34;社區感測&#34;: 1
}
</code></pre><h3 id="data-cleansing">Data Cleansing</h3>
<p>Since there are currently 8,620 records scattered in 19 types of places, we first merge similar types of area types to conform to the meaning of the data. Then, for simplicity, we only focus on four major area types: general communities, transportation areas, industrial areas, and industrial-adjacent communities. We rearrange the data using the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> datapoint <span style="color:#f92672">in</span> Data:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;社區&#39;</span>:
</span></span><span style="display:flex;"><span>        datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;一般社區&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;社區感測&#39;</span>:
</span></span><span style="display:flex;"><span>        datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;一般社區&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;交通&#39;</span>:
</span></span><span style="display:flex;"><span>        datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;交通區&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;交通感測&#39;</span>:
</span></span><span style="display:flex;"><span>        datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;交通區&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;工業&#39;</span>:
</span></span><span style="display:flex;"><span>        datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;工業區&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;工業感測&#39;</span>:
</span></span><span style="display:flex;"><span>        datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;工業區&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;一般社區&#39;</span>, <span style="color:#e6db74">&#39;交通區&#39;</span>, <span style="color:#e6db74">&#39;工業區&#39;</span>, <span style="color:#e6db74">&#39;鄰近工業區社區&#39;</span>]:
</span></span><span style="display:flex;"><span>        datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>Data <span style="color:#f92672">=</span> [datapoint <span style="color:#66d9ef">for</span> datapoint <span style="color:#f92672">in</span> Data <span style="color:#66d9ef">if</span> datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>] <span style="color:#f92672">!=</span> <span style="color:#66d9ef">None</span>]
</span></span><span style="display:flex;"><span>Label <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;一般社區&#39;</span>, <span style="color:#e6db74">&#39;交通區&#39;</span>, <span style="color:#e6db74">&#39;工業區&#39;</span>, <span style="color:#e6db74">&#39;鄰近工業區社區&#39;</span>]
</span></span><span style="display:flex;"><span>count <span style="color:#f92672">=</span> dict<span style="color:#f92672">.</span>fromkeys(Label, <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> datapoint <span style="color:#f92672">in</span> Data:
</span></span><span style="display:flex;"><span>    count[datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>]] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;After data cleaning, There are </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> records.&#34;</span><span style="color:#f92672">.</span>format(len(Data)))
</span></span><span style="display:flex;"><span>print(json<span style="color:#f92672">.</span>dumps(count, indent<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, ensure_ascii<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>))
</span></span></code></pre></div><pre tabindex="0"><code>After data cleaning, There are 7709 records.
{
    &#34;一般社區&#34;: 2245,
    &#34;交通區&#34;: 975,
    &#34;工業區&#34;: 3541,
    &#34;鄰近工業區社區&#34;: 948
}
</code></pre><p>After data cleansing, 7,709 records were left, distributed in four major areas. For these records, we consider each data&rsquo;s temperature, relative humidity, and PM2.5 concentration and use different colors in the three-dimensional data distribution map to represent the data of different types of areas.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>DataX, DataY <span style="color:#f92672">=</span> [], []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> datapoint <span style="color:#f92672">in</span> Data:
</span></span><span style="display:flex;"><span>    TmpX <span style="color:#f92672">=</span> [<span style="color:#66d9ef">None</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>    TmpY <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> rawdata_array <span style="color:#f92672">in</span> datapoint[<span style="color:#e6db74">&#39;data&#39;</span>]:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(rawdata_array[<span style="color:#e6db74">&#39;name&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Temperature&#39;</span>):
</span></span><span style="display:flex;"><span>            TmpX[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> rawdata_array[<span style="color:#e6db74">&#39;values&#39;</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;value&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(rawdata_array[<span style="color:#e6db74">&#39;name&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Relative humidity&#39;</span>):
</span></span><span style="display:flex;"><span>            TmpX[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> rawdata_array[<span style="color:#e6db74">&#39;values&#39;</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;value&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(rawdata_array[<span style="color:#e6db74">&#39;name&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;PM2.5&#39;</span>):
</span></span><span style="display:flex;"><span>            TmpX[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">=</span> rawdata_array[<span style="color:#e6db74">&#39;values&#39;</span>][<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;value&#39;</span>)
</span></span><span style="display:flex;"><span>    TmpY <span style="color:#f92672">=</span> Label<span style="color:#f92672">.</span>index(datapoint[<span style="color:#e6db74">&#39;properties&#39;</span>][<span style="color:#e6db74">&#39;areaType&#39;</span>])
</span></span><span style="display:flex;"><span>    DataX<span style="color:#f92672">.</span>append(TmpX)
</span></span><span style="display:flex;"><span>    DataY<span style="color:#f92672">.</span>append(TmpY)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>DataX_Numpy <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(DataX)
</span></span><span style="display:flex;"><span>DataY_Numpy <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(DataY)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>rc(<span style="color:#e6db74">&#39;legend&#39;</span>,fontsize<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;xx-small&#34;</span>)
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">6</span>), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(projection<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;3d&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(Label)):
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>scatter(DataX_Numpy[DataY_Numpy<span style="color:#f92672">==</span>i][:,<span style="color:#ae81ff">0</span>],DataX_Numpy[DataY_Numpy<span style="color:#f92672">==</span>i][:,<span style="color:#ae81ff">1</span>],DataX_Numpy[DataY_Numpy<span style="color:#f92672">==</span>i][:,<span style="color:#ae81ff">2</span>], s<span style="color:#f92672">=</span><span style="color:#ae81ff">0.1</span>, label<span style="color:#f92672">=</span>Label[i])
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>legend()
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;Temperature(℃)&#39;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Relative Humidity(%)&#39;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_zlabel(<span style="color:#e6db74">&#39;PM2.5(μg/$m^</span><span style="color:#e6db74">{3}</span><span style="color:#e6db74">$)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img src="figures/6-1-3-1.png" alt="Python output"></p>
<p>The data distribution diagram shows that most of the data are gathered in a specific space, but a few are scattered in a very peripheral place. These data that are far from the group are called outliers. For data classification or clustering, outliers can easily lead our model or algorithm to extremes, thus losing its versatility, so we need to remove these data first.</p>
<h3 id="outlier-removal">Outlier removal</h3>
<p>The method of removing outliers is nothing more than using the statistical characteristics of the data, which can be defined according to the needs of different application scenarios. In our example, we define one of the sensor data as an outlier if its value deviates from the mean by more than two standard deviations. After removing the data of these outliers, we redraw the three-dimensional distribution map to observe its distribution.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">Outlier_Filter</span>(arr, k):
</span></span><span style="display:flex;"><span>    Boolean_Arr <span style="color:#f92672">=</span>  np<span style="color:#f92672">.</span>ones(arr<span style="color:#f92672">.</span>shape[<span style="color:#ae81ff">0</span>], dtype<span style="color:#f92672">=</span>bool)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(arr<span style="color:#f92672">.</span>shape[<span style="color:#ae81ff">1</span>]):
</span></span><span style="display:flex;"><span>        Boolean_Arr <span style="color:#f92672">=</span> Boolean_Arr <span style="color:#f92672">&amp;</span> (abs(arr[:,i] <span style="color:#f92672">-</span> np<span style="color:#f92672">.</span>mean(arr[:,i])) <span style="color:#f92672">&lt;</span>  k<span style="color:#f92672">*</span>np<span style="color:#f92672">.</span>std(arr[:,i]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> Boolean_Arr
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>OutlierFilter <span style="color:#f92672">=</span> Outlier_Filter(DataX_Numpy, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>DataX_Numpy <span style="color:#f92672">=</span> DataX_Numpy[OutlierFilter]
</span></span><span style="display:flex;"><span>DataY_Numpy <span style="color:#f92672">=</span> DataY_Numpy[OutlierFilter]
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;After removing Outliers, there are </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> records left.&#34;</span><span style="color:#f92672">.</span>format(DataX_Numpy<span style="color:#f92672">.</span>shape[<span style="color:#ae81ff">0</span>]))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>rc(<span style="color:#e6db74">&#39;legend&#39;</span>,fontsize<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;xx-small&#34;</span>)
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">6</span>), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(projection<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;3d&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(Label)):
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>scatter(DataX_Numpy[DataY_Numpy<span style="color:#f92672">==</span>i][:,<span style="color:#ae81ff">0</span>],DataX_Numpy[DataY_Numpy<span style="color:#f92672">==</span>i][:,<span style="color:#ae81ff">1</span>],DataX_Numpy[DataY_Numpy<span style="color:#f92672">==</span>i][:,<span style="color:#ae81ff">2</span>], s<span style="color:#f92672">=</span><span style="color:#ae81ff">0.1</span>, label<span style="color:#f92672">=</span>Label[i])
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>legend()
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;Temperature(℃)&#39;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Relative Humidity(%)&#39;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_zlabel(<span style="color:#e6db74">&#39;PM2.5(μg/$m^</span><span style="color:#e6db74">{3}</span><span style="color:#e6db74">$)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><pre tabindex="0"><code>After removing Outliers, there are 7161 records left.
</code></pre><p><img src="figures/6-1-3-2.png" alt="Python output"></p>
<p>Judging from the final results, we have removed 7,709 - 7,161 = 548 outlier records in total. The distribution of the remaining data in the three-dimensional space is relatively concentrated without deviations in the periphery. For ease of observation, we plot the distribution of the three data in different dimensions by selecting two dimensions at a time.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>rc(<span style="color:#e6db74">&#39;legend&#39;</span>,fontsize<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;large&#34;</span>)
</span></span><span style="display:flex;"><span>fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">24</span>, <span style="color:#ae81ff">6</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(DataX_Numpy<span style="color:#f92672">.</span>shape[<span style="color:#ae81ff">1</span>]):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(len(Label)):
</span></span><span style="display:flex;"><span>        axes[i]<span style="color:#f92672">.</span>scatter(DataX_Numpy[DataY_Numpy<span style="color:#f92672">==</span>j][:,i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>],DataX_Numpy[DataY_Numpy<span style="color:#f92672">==</span>j][:,(i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>], s<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, label<span style="color:#f92672">=</span>Label[j])
</span></span><span style="display:flex;"><span>        axes[i]<span style="color:#f92672">.</span>legend(loc<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>        Axis_label <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;Temperature(℃)&#39;</span>, <span style="color:#e6db74">&#39;Relative Humidity(%)&#39;</span>, <span style="color:#e6db74">&#39;PM2.5(μg/$m^</span><span style="color:#e6db74">{3}</span><span style="color:#e6db74">$)&#39;</span>]
</span></span><span style="display:flex;"><span>        axes[i]<span style="color:#f92672">.</span>set_xlabel(Axis_label[i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>])
</span></span><span style="display:flex;"><span>        axes[i]<span style="color:#f92672">.</span>set_ylabel(Axis_label[(i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>])
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>tight_layout()
</span></span></code></pre></div><p><img src="figures/6-1-3-3.png" alt="Python output"></p>
<p>From these three graphs, we can see a special relationship between the data of different colors (area types). Although it is challenging to describe directly, we will introduce a classification model to build a dedicated classifier.</p>
<h3 id="train-data-and-test-data">Train data and test data</h3>
<p>Before entering the model training of the classifier, we have another step to deal with: splitting the existing data set into training and test data. As the name suggests, the training data will be used to tune the classifier&rsquo;s model, while the test data will be used to test how well the built classifier works on new data. We use the following sample program to split the dataset into training and testing data at a ratio of 4:1.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>indices <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>random<span style="color:#f92672">.</span>permutation(DataX_Numpy<span style="color:#f92672">.</span>shape[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>Train_idx, Test_idx <span style="color:#f92672">=</span> indices[:int(DataX_Numpy<span style="color:#f92672">.</span>shape[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">0.8</span>)], indices[<span style="color:#ae81ff">80</span>:(DataX_Numpy<span style="color:#f92672">.</span>shape[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">-</span> int(DataX_Numpy<span style="color:#f92672">.</span>shape[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">0.8</span>))]
</span></span><span style="display:flex;"><span>TrainX, TestX <span style="color:#f92672">=</span> DataX_Numpy[Train_idx,:], DataX_Numpy[Test_idx,:]
</span></span><span style="display:flex;"><span>TrainY, TestY <span style="color:#f92672">=</span> DataY_Numpy[Train_idx], DataY_Numpy[Test_idx]
</span></span></code></pre></div><h3 id="using-the-pre-built-sklearn-models">Using the pre-built Sklearn models</h3>
<p>We use the classifier model provided by the Python package Scikit Learn (sklearn) for training and testing. We use nine models in a series of examples, including nearest neighbor, linear SVM, RBF SVM, decision tree, random forest, neural network, Adaboost, Naive Bayes, and QDA. We sequentially introduce training data for adjustment and then test data for prediction. We compare the test data with the label content in the predicted results and use a <a href="https://en.wikipedia.org/wiki/Confusion_matrix">confusion matrix</a> to present the classification results for different label combinations.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>classifier_names <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Nearest Neighbors&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Linear SVM&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;RBF SVM&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Decision Tree&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Random Forest&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Neural Net&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;AdaBoost&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Naive Bayes&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;QDA&#34;</span>,
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>classifiers <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    KNeighborsClassifier(<span style="color:#ae81ff">3</span>),
</span></span><span style="display:flex;"><span>    SVC(kernel<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;linear&#34;</span>, C<span style="color:#f92672">=</span><span style="color:#ae81ff">0.025</span>),
</span></span><span style="display:flex;"><span>    SVC(gamma<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, C<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>    DecisionTreeClassifier(max_depth<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>),
</span></span><span style="display:flex;"><span>    RandomForestClassifier(max_depth<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>, n_estimators<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, max_features<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>    MLPClassifier(alpha<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, max_iter<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>),
</span></span><span style="display:flex;"><span>    AdaBoostClassifier(),
</span></span><span style="display:flex;"><span>    GaussianNB(),
</span></span><span style="display:flex;"><span>    QuadraticDiscriminantAnalysis(),
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>,figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">13.5</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i, model <span style="color:#f92672">in</span> enumerate(classifiers):
</span></span><span style="display:flex;"><span>    model<span style="color:#f92672">.</span>fit(TrainX, TrainY)
</span></span><span style="display:flex;"><span>    Result <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>predict(TestX)
</span></span><span style="display:flex;"><span>    mat <span style="color:#f92672">=</span> confusion_matrix(TestY, Result)
</span></span><span style="display:flex;"><span>    sns<span style="color:#f92672">.</span>heatmap(mat<span style="color:#f92672">.</span>T, square<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, annot<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, fmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;d&#39;</span>, cbar<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>,
</span></span><span style="display:flex;"><span>                xticklabels<span style="color:#f92672">=</span>Label, yticklabels<span style="color:#f92672">=</span>Label, ax <span style="color:#f92672">=</span> axes[i<span style="color:#f92672">//</span><span style="color:#ae81ff">3</span>][i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>])
</span></span><span style="display:flex;"><span>    axes[i<span style="color:#f92672">//</span><span style="color:#ae81ff">3</span>][i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">,  Accuracy : </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(classifier_names[i], round(accuracy_score(Result, TestY), <span style="color:#ae81ff">3</span>)), fontweight<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bold&#34;</span>, size<span style="color:#f92672">=</span><span style="color:#ae81ff">13</span>)
</span></span><span style="display:flex;"><span>    axes[i<span style="color:#f92672">//</span><span style="color:#ae81ff">3</span>][i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;true label&#39;</span>, fontsize <span style="color:#f92672">=</span> <span style="color:#ae81ff">10.0</span>)
</span></span><span style="display:flex;"><span>    axes[i<span style="color:#f92672">//</span><span style="color:#ae81ff">3</span>][i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;predicted label&#39;</span>, fontsize <span style="color:#f92672">=</span> <span style="color:#ae81ff">10.0</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>tight_layout()
</span></span></code></pre></div><p><img src="figures/6-1-3-4.png" alt="Python output"></p>
<p>Among the classification results of these nine classification models, we found that RBF SVM can achieve a classification success rate of nearly 70%. This is only the result of using the original data without further processing and analysis. If readers are interested in the classifier, you can refer to relevant resources for more in-depth exploration, further improving the classifier&rsquo;s ability to classify different data types.</p>
<h2 id="case-2-clustering-of-air-quality-sensors">Case 2: Clustering of Air Quality Sensors</h2>
<p>In this case, we use the sensing data of the Taiwan EPA air quality monitoring station in Civil IoT Taiwan and analyze its historical data. The relationship is grouped so that each group&rsquo;s stations have similar sensory data trends.</p>
<h3 id="data-download-and-preprocessing">Data download and preprocessing</h3>
<p>We use the following codes to download all the sensing data of the Taiwan EPA air quality monitoring stations in 2021 from the historical database of the Civil IoT Taiwan Data Service Platform and decompress the downloaded file into <code>/content</code> directory.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>wget <span style="color:#f92672">-</span>O <span style="color:#e6db74">&#39;EPA_OD_2021.zip&#39;</span> <span style="color:#f92672">-</span>q <span style="color:#e6db74">&#34;https://history.colife.org.tw/?r=/download&amp;path=L%2Bepuuawo%2BWTgeizqi</span><span style="color:#e6db74">%2F</span><span style="color:#e6db74">nkrDkv53nvbJf5ZyL5a6256m65ZOB5ris56uZL0VQQV9PRF8yMDIxLnppcA%3D%3D&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>unzip <span style="color:#f92672">-</span>q <span style="color:#e6db74">&#39;EPA_OD_2021.zip&#39;</span> <span style="color:#f92672">&amp;&amp;</span> rm <span style="color:#e6db74">&#39;EPA_OD_2021.zip&#39;</span> 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>unzip <span style="color:#f92672">-</span>q <span style="color:#e6db74">&#39;/content/EPA_OD_2021/EPA_OD_202112.zip&#39;</span> <span style="color:#f92672">-</span>d <span style="color:#e6db74">&#39;/content&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>rm <span style="color:#f92672">-</span>rf <span style="color:#e6db74">&#39;/content/EPA_OD_2021&#39;</span>
</span></span></code></pre></div><p>We first select the data of December 2021 and delete the unnecessary fields <code>Pollutant</code>, <code>SiteId</code>, <code>Status</code>, <code>SO2_AVG</code>. Then we change the data type of the sensing data to a floating point number to facilitate subsequent processing.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Dataframe <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;/content/EPA_OD_202112.csv&#34;</span>, parse_dates<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;PublishTime&#39;</span>])
</span></span><span style="display:flex;"><span>Dataframe <span style="color:#f92672">=</span> Dataframe<span style="color:#f92672">.</span>drop(columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;Pollutant&#34;</span>, <span style="color:#e6db74">&#34;SiteId&#34;</span>, <span style="color:#e6db74">&#34;Status&#34;</span>, <span style="color:#e6db74">&#34;SO2_AVG&#34;</span>])
</span></span><span style="display:flex;"><span>Numerical_ColumnNames <span style="color:#f92672">=</span> list(Dataframe<span style="color:#f92672">.</span>columns<span style="color:#f92672">.</span>values)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> ColumnName <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;SiteName&#39;</span>, <span style="color:#e6db74">&#39;County&#39;</span>, <span style="color:#e6db74">&#39;PublishTime&#39;</span>]:
</span></span><span style="display:flex;"><span>    Numerical_ColumnNames<span style="color:#f92672">.</span>remove(ColumnName)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> Numerical_ColumnName <span style="color:#f92672">in</span> Numerical_ColumnNames:
</span></span><span style="display:flex;"><span>    Dataframe[Numerical_ColumnName] <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>to_numeric(Dataframe[Numerical_ColumnName], errors<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;coerce&#39;</span>)<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;float64&#39;</span>)
</span></span><span style="display:flex;"><span>Dataframe <span style="color:#f92672">=</span> Dataframe<span style="color:#f92672">.</span>dropna()
</span></span><span style="display:flex;"><span>Dataframe<span style="color:#f92672">.</span>head()
</span></span></code></pre></div><p><img src="figures/6-1-4-1.png" alt="Python output"></p>
<p>Due to the massive amount of data in one month, to shorten the execution time of the sample program, we extract the data of the five days from 2021-12-13 to 2021-12-17 as <code>FiveDay_Dataframe</code>, as in the example below, and use the <code>Country</code> and <code>SiteName</code> fields to merge the data. We then sort the data by when it was published.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>FiveDay_Dataframe <span style="color:#f92672">=</span> Dataframe<span style="color:#f92672">.</span>loc[(Dataframe[<span style="color:#e6db74">&#39;PublishTime&#39;</span>] <span style="color:#f92672">&lt;=</span> <span style="color:#e6db74">&#39;2021-12-17 23:00:00&#39;</span>) <span style="color:#f92672">&amp;</span> (Dataframe[<span style="color:#e6db74">&#39;PublishTime&#39;</span>] <span style="color:#f92672">&gt;=</span> <span style="color:#e6db74">&#39;2021-12-13 00:00:00&#39;</span>)]
</span></span><span style="display:flex;"><span>FiveDay_Dataframe[<span style="color:#e6db74">&#39;CountyAndSiteName&#39;</span>] <span style="color:#f92672">=</span> FiveDay_Dataframe[<span style="color:#e6db74">&#39;County&#39;</span>] <span style="color:#f92672">+</span> FiveDay_Dataframe[<span style="color:#e6db74">&#39;SiteName&#39;</span>]
</span></span><span style="display:flex;"><span>FiveDay_Dataframe <span style="color:#f92672">=</span> FiveDay_Dataframe<span style="color:#f92672">.</span>drop(columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;County&#34;</span>, <span style="color:#e6db74">&#34;SiteName&#34;</span>])
</span></span><span style="display:flex;"><span>FiveDay_Dataframe <span style="color:#f92672">=</span> FiveDay_Dataframe<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;CountyAndSiteName&#39;</span>,<span style="color:#e6db74">&#39;PublishTime&#39;</span>])
</span></span><span style="display:flex;"><span>FiveDay_Dataframe <span style="color:#f92672">=</span> FiveDay_Dataframe<span style="color:#f92672">.</span>set_index(keys <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;CountyAndSiteName&#39;</span>])
</span></span><span style="display:flex;"><span>FiveDay_Dataframe
</span></span></code></pre></div><p><img src="figures/6-1-4-2.png" alt="Python output"></p>
<h3 id="dynamic-time-warping-dtw">Dynamic Time Warping (DTW)</h3>
<p>Next, we judge the &ldquo;similarity&rdquo; between the two sites and quantify it into a number. The primary similarity measurement method is to directly align the data of two measuring stations according to the perception time and then calculate the gap between the two air quality measurements. However, since air pollution may occur in different orders between sites and the duration of its effects is not necessarily the same, more flexibility in estimating the similarity between two sites is needed. Therefore, we used the dynamic time wrapping (DTW) method to measure the similarity. The smaller the DTW distance between the two stations, the higher their similarity.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Site_TimeSeriesData <span style="color:#f92672">=</span> dict()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> Site <span style="color:#f92672">in</span> np<span style="color:#f92672">.</span>unique(FiveDay_Dataframe<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>values):
</span></span><span style="display:flex;"><span>    tmp <span style="color:#f92672">=</span> FiveDay_Dataframe[FiveDay_Dataframe<span style="color:#f92672">.</span>index <span style="color:#f92672">==</span> Site]
</span></span><span style="display:flex;"><span>    tmp <span style="color:#f92672">=</span> tmp<span style="color:#f92672">.</span>groupby([<span style="color:#e6db74">&#39;CountyAndSiteName&#39;</span>, <span style="color:#e6db74">&#39;PublishTime&#39;</span>], as_index<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>mean()
</span></span><span style="display:flex;"><span>    tmp <span style="color:#f92672">=</span> tmp<span style="color:#f92672">.</span>loc[:,<span style="color:#f92672">~</span>tmp<span style="color:#f92672">.</span>columns<span style="color:#f92672">.</span>isin([<span style="color:#e6db74">&#39;CountyAndSiteName&#39;</span>, <span style="color:#e6db74">&#39;PublishTime&#39;</span>])]
</span></span><span style="display:flex;"><span>    Site_TimeSeriesData[Site] <span style="color:#f92672">=</span> tmp<span style="color:#f92672">.</span>to_numpy()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>DictKeys <span style="color:#f92672">=</span> Site_TimeSeriesData<span style="color:#f92672">.</span>keys()
</span></span><span style="display:flex;"><span>Sites_DTW <span style="color:#f92672">=</span> dict()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i, key1 <span style="color:#f92672">in</span> enumerate(DictKeys):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j, key2 <span style="color:#f92672">in</span> enumerate(DictKeys):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> i <span style="color:#f92672">&gt;=</span> j: 
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            Sites_DTW[str(key1)<span style="color:#f92672">+</span><span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">+</span>str(key2)] <span style="color:#f92672">=</span> fastdtw(Site_TimeSeriesData[key1][:,:<span style="color:#f92672">-</span><span style="color:#ae81ff">4</span>], Site_TimeSeriesData[key2][:,:<span style="color:#f92672">-</span><span style="color:#ae81ff">4</span>], dist<span style="color:#f92672">=</span>euclidean)[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>Sites_DTW_keys <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(list(Sites_DTW<span style="color:#f92672">.</span>keys()))
</span></span><span style="display:flex;"><span>Site_DTW_Numpy <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[value] <span style="color:#66d9ef">for</span> _, value <span style="color:#f92672">in</span> Sites_DTW<span style="color:#f92672">.</span>items()])
</span></span></code></pre></div><p>We plot the DTW distance between all sites in the figure below, where the DTW distance is small to large. For further processing, we need to start analyzing with clustering algorithms.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>scatter(Site_DTW_Numpy[:,<span style="color:#ae81ff">0</span>], [<span style="color:#ae81ff">1</span>]<span style="color:#f92672">*</span>len(Sites_DTW<span style="color:#f92672">.</span>items()), s<span style="color:#f92672">=</span><span style="color:#ae81ff">0.05</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>get_yaxis()<span style="color:#f92672">.</span>set_visible(<span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.5</span>, <span style="color:#ae81ff">0.01</span>, <span style="color:#e6db74">&#39;DTW distance&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.06</span>, <span style="color:#ae81ff">0.5</span>, <span style="color:#e6db74">&#39;Group number&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;vertical&#39;</span>)
</span></span></code></pre></div><p><img src="figures/6-1-4-3.png" alt="Python output"></p>
<h3 id="k-mean-clustering">K-Mean clustering</h3>
<p>We use the K-Means module in the sklearn package for data clustering. Since the clustering algorithm needs to set the number of clusters to be generated in advance, we first set it to 3. We clustered using the following code and plotted the results with the cluster number as Y-axis and the DTW similarity value to other data as X-axis.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.cluster <span style="color:#f92672">import</span> KMeans
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> KMeans(n_clusters<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>, random_state<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)<span style="color:#f92672">.</span>fit([[value] <span style="color:#66d9ef">for</span> _, value <span style="color:#f92672">in</span> Sites_DTW<span style="color:#f92672">.</span>items()])
</span></span><span style="display:flex;"><span>Result <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>labels_
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> np<span style="color:#f92672">.</span>unique(Result):
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Number of Cluster</span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> : </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(i,len(Result[Result<span style="color:#f92672">==</span>i])))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> np<span style="color:#f92672">.</span>unique(Result):
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>scatter(Site_DTW_Numpy[Result<span style="color:#f92672">==</span>i][:,<span style="color:#ae81ff">0</span>],[i]<span style="color:#f92672">*</span>len(Site_DTW_Numpy[Result<span style="color:#f92672">==</span>i]), s<span style="color:#f92672">=</span><span style="color:#ae81ff">0.05</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>get_yaxis()<span style="color:#f92672">.</span>set_visible(<span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.5</span>, <span style="color:#ae81ff">0.01</span>, <span style="color:#e6db74">&#39;DTW distance&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.06</span>, <span style="color:#ae81ff">0.5</span>, <span style="color:#e6db74">&#39;Group number&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;vertical&#39;</span>)
</span></span></code></pre></div><pre tabindex="0"><code>Number of Cluster0 : 1165
Number of Cluster1 : 994
Number of Cluster2 : 542
</code></pre><p><img src="figures/6-1-4-4.png" alt="Python output"></p>
<p>The clustering results show that the K-Means algorithm divides the original data into three clusters, with 1,165, 994, and 542 data, respectively. To further understand the causes of these three groups, we continue to trace each possible reason for the formation of a group.</p>
<h3 id="correlation-between-data-clusters-and-geographical-locations">Correlation between data clusters and geographical locations</h3>
<p>We first assume that the change in air quality is regional, so we explore whether the results of data clustering are related to the geographical location of air quality stations. We first retrieve the GPS coordinates of the stations and compute the physical distances of the two geographical locations. Then, according to the results of data clustering, we conduct a simple statistical analysis of the physical distances of different clusters and draw them in the picture below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Dist_for_Clusters <span style="color:#f92672">=</span> [<span style="color:#66d9ef">None</span>]<span style="color:#f92672">*</span>len(np<span style="color:#f92672">.</span>unique(Result))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> np<span style="color:#f92672">.</span>unique(Result):
</span></span><span style="display:flex;"><span>    Dist_for_Cluster <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    Cluster <span style="color:#f92672">=</span> Sites_DTW_keys[Result<span style="color:#f92672">==</span>i]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> Sites <span style="color:#f92672">in</span> Cluster:
</span></span><span style="display:flex;"><span>        Site1, Site2 <span style="color:#f92672">=</span> Sites<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>        coord1 <span style="color:#f92672">=</span> Site_TimeSeriesData[Site1][<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], Site_TimeSeriesData[Site1][<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>        coord2 <span style="color:#f92672">=</span> Site_TimeSeriesData[Site2][<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], Site_TimeSeriesData[Site2][<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>        Dist_for_Cluster<span style="color:#f92672">.</span>append(geopy<span style="color:#f92672">.</span>distance<span style="color:#f92672">.</span>geodesic(coord1, coord2)<span style="color:#f92672">.</span>km)
</span></span><span style="display:flex;"><span>    Dist_for_Cluster <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(Dist_for_Cluster)
</span></span><span style="display:flex;"><span>    Dist_for_Clusters[i] <span style="color:#f92672">=</span> Dist_for_Cluster
</span></span><span style="display:flex;"><span>Dist_for_Clusters <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(Dist_for_Clusters)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># for Dist_for_Cluster in Dist_for_Clusters:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#     print(np.mean(Dist_for_Cluster))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> np<span style="color:#f92672">.</span>unique(Result):
</span></span><span style="display:flex;"><span>    gtMean <span style="color:#f92672">=</span> Dist_for_Clusters[i][Dist_for_Clusters[i]<span style="color:#f92672">&gt;</span>np<span style="color:#f92672">.</span>mean(Dist_for_Clusters[i])]
</span></span><span style="display:flex;"><span>    ltMean <span style="color:#f92672">=</span> Dist_for_Clusters[i][Dist_for_Clusters[i]<span style="color:#f92672">&lt;</span>np<span style="color:#f92672">.</span>mean(Dist_for_Clusters[i])]
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Mean Distance between Sites for Cluster</span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> : </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(i, np<span style="color:#f92672">.</span>mean(Dist_for_Clusters[i])))
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;In Cluster</span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> there are </span><span style="color:#e6db74">{:.2%}</span><span style="color:#e6db74"> less than mean, and </span><span style="color:#e6db74">{:.2%}</span><span style="color:#e6db74"> greater than mean.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(i, len(ltMean)<span style="color:#f92672">/</span>len(Dist_for_Clusters[i]), len(gtMean)<span style="color:#f92672">/</span>len(Dist_for_Clusters[i])))
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>scatter(gtMean, [i]<span style="color:#f92672">*</span>len(gtMean), s<span style="color:#f92672">=</span><span style="color:#ae81ff">0.05</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;orange&#34;</span>)
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>scatter(ltMean, [i]<span style="color:#f92672">*</span>len(ltMean), s<span style="color:#f92672">=</span><span style="color:#ae81ff">0.05</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;pink&#34;</span>)
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>axvline(np<span style="color:#f92672">.</span>mean(Dist_for_Clusters[i]), ymin <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.45</span><span style="color:#f92672">*</span>i, ymax <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.45</span><span style="color:#f92672">*</span>i<span style="color:#f92672">+</span><span style="color:#ae81ff">0.1</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>, linewidth<span style="color:#f92672">=</span><span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>get_yaxis()<span style="color:#f92672">.</span>set_visible(<span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.5</span>, <span style="color:#ae81ff">0.01</span>, <span style="color:#e6db74">&#39;DTW distance&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.06</span>, <span style="color:#ae81ff">0.5</span>, <span style="color:#e6db74">&#39;Group number&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;vertical&#39;</span>)
</span></span></code></pre></div><pre tabindex="0"><code>Mean Distance between Sites for Cluster0 : 84.34126465234523
In Cluster0 there are 60.09% less than mean, and 39.91% greater than mean.

Mean Distance between Sites for Cluster1 : 180.26230465399215
In Cluster1 there are 54.53% less than mean, and 45.47% greater than mean.

Mean Distance between Sites for Cluster2 : 234.89206124762546
In Cluster2 there are 39.48% less than mean, and 60.52% greater than mean.
</code></pre><p><img src="figures/6-1-4-5.png" alt="Python output"></p>
<p>The analysis results show that the group with a higher DTW value (lower time series similarity) has a more considerable average distance between stations and vice versa. The similarity of the station data is related to the difference in geographical location, which should also support our hypothesis, confirming that the dispersion of air pollutants is indeed affected by geographical distance.</p>
<h3 id="correlation-between-data-clusters-and-wind-directions">Correlation between data clusters and wind directions</h3>
<p>We then assume that the change in air quality is affected by the environmental wind field, so we explore whether the results of data clustering are related to the wind direction where the air quality station is located. We first retrieve the GPS coordinates of the station and convert the azimuth relationship between the two geographical locations. Then, according to the data clustering results, we calculated the correlation between the geographical location of azimuth and the wind direction on site. Finally, we conduct a simple statistical analysis of the obtained values and draw them in the figure below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_bearing</span>(lat1, long1, lat2, long2):
</span></span><span style="display:flex;"><span>    dLon <span style="color:#f92672">=</span> (long2 <span style="color:#f92672">-</span> long1)
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>cos(math<span style="color:#f92672">.</span>radians(lat2)) <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>sin(math<span style="color:#f92672">.</span>radians(dLon))
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>cos(math<span style="color:#f92672">.</span>radians(lat1)) <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>sin(math<span style="color:#f92672">.</span>radians(lat2)) <span style="color:#f92672">-</span> math<span style="color:#f92672">.</span>sin(math<span style="color:#f92672">.</span>radians(lat1)) <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>cos(math<span style="color:#f92672">.</span>radians(lat2)) <span style="color:#f92672">*</span> math<span style="color:#f92672">.</span>cos(math<span style="color:#f92672">.</span>radians(dLon))
</span></span><span style="display:flex;"><span>    brng <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arctan2(x,y)
</span></span><span style="display:flex;"><span>    brng <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>degrees(brng)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> brng
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">Check_Wind_Dirc</span>(brng, wind_dirc):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> brng <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">180</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ((brng <span style="color:#f92672">&lt;</span> wind_dirc <span style="color:#f92672">+</span> <span style="color:#ae81ff">45</span>) <span style="color:#f92672">and</span> (brng <span style="color:#f92672">&gt;</span> wind_dirc <span style="color:#f92672">-</span> <span style="color:#ae81ff">45</span>)) <span style="color:#f92672">or</span> ((brng <span style="color:#f92672">-</span> <span style="color:#ae81ff">180</span> <span style="color:#f92672">&lt;</span> wind_dirc <span style="color:#f92672">+</span> <span style="color:#ae81ff">45</span>) <span style="color:#f92672">and</span> (brng <span style="color:#f92672">-</span> <span style="color:#ae81ff">180</span> <span style="color:#f92672">&gt;</span> wind_dirc <span style="color:#f92672">-</span> <span style="color:#ae81ff">45</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ((brng <span style="color:#f92672">&lt;</span> wind_dirc <span style="color:#f92672">+</span> <span style="color:#ae81ff">45</span>) <span style="color:#f92672">and</span> (brng <span style="color:#f92672">&gt;</span> wind_dirc <span style="color:#f92672">-</span> <span style="color:#ae81ff">45</span>)) <span style="color:#f92672">or</span> ((brng <span style="color:#f92672">+</span> <span style="color:#ae81ff">180</span> <span style="color:#f92672">&lt;</span> wind_dirc <span style="color:#f92672">+</span> <span style="color:#ae81ff">45</span>) <span style="color:#f92672">and</span> (brng <span style="color:#f92672">+</span> <span style="color:#ae81ff">180</span> <span style="color:#f92672">&gt;</span> wind_dirc <span style="color:#f92672">-</span> <span style="color:#ae81ff">45</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Brng_for_Clusters <span style="color:#f92672">=</span> [<span style="color:#66d9ef">None</span>]<span style="color:#f92672">*</span>len(np<span style="color:#f92672">.</span>unique(Result))
</span></span><span style="display:flex;"><span>Boolean_WindRelated_for_Clusters <span style="color:#f92672">=</span> [<span style="color:#66d9ef">None</span>]<span style="color:#f92672">*</span>len(np<span style="color:#f92672">.</span>unique(Result))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> np<span style="color:#f92672">.</span>unique(Result):
</span></span><span style="display:flex;"><span>    Brng_for_Cluster <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    Boolean_WindRelated_for_Cluster <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    Cluster <span style="color:#f92672">=</span> Sites_DTW_keys[Result<span style="color:#f92672">==</span>i]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> Sites <span style="color:#f92672">in</span> Cluster:
</span></span><span style="display:flex;"><span>        Site1, Site2 <span style="color:#f92672">=</span> Sites<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39; &#39;</span>)
</span></span><span style="display:flex;"><span>        coord1 <span style="color:#f92672">=</span> Site_TimeSeriesData[Site1][<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], Site_TimeSeriesData[Site1][<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>        coord2 <span style="color:#f92672">=</span> Site_TimeSeriesData[Site2][<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>], Site_TimeSeriesData[Site2][<span style="color:#ae81ff">0</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>        Brng_Between_Site <span style="color:#f92672">=</span> get_bearing(coord1[<span style="color:#ae81ff">0</span>], coord1[<span style="color:#ae81ff">1</span>], coord2[<span style="color:#ae81ff">0</span>], coord2[<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>        Brng_for_Cluster<span style="color:#f92672">.</span>append(Brng_Between_Site)
</span></span><span style="display:flex;"><span>        MeanWindDirc1 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>mean(Site_TimeSeriesData[Site1][:,<span style="color:#f92672">-</span><span style="color:#ae81ff">3</span>])
</span></span><span style="display:flex;"><span>        MeanWindDirc2 <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>mean(Site_TimeSeriesData[Site2][:,<span style="color:#f92672">-</span><span style="color:#ae81ff">3</span>])
</span></span><span style="display:flex;"><span>        Boolean_WindRelated_for_Cluster<span style="color:#f92672">.</span>append(Check_Wind_Dirc(Brng_Between_Site, MeanWindDirc1) <span style="color:#f92672">or</span> Check_Wind_Dirc(Brng_Between_Site, MeanWindDirc2))
</span></span><span style="display:flex;"><span>    Brng_for_Cluster <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(Brng_for_Cluster)
</span></span><span style="display:flex;"><span>    Boolean_WindRelated_for_Cluster <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(Boolean_WindRelated_for_Cluster)
</span></span><span style="display:flex;"><span>    Boolean_WindRelated_for_Clusters[i] <span style="color:#f92672">=</span> Boolean_WindRelated_for_Cluster
</span></span><span style="display:flex;"><span>    Brng_for_Clusters[i] <span style="color:#f92672">=</span> Brng_for_Cluster
</span></span><span style="display:flex;"><span>Brng_for_Clusters <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(Brng_for_Clusters)
</span></span><span style="display:flex;"><span>Boolean_WindRelated_for_Clusters <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(Boolean_WindRelated_for_Clusters)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> np<span style="color:#f92672">.</span>unique(Result):
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Relevance for Cluster</span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> : </span><span style="color:#e6db74">{:.2%}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(i, len(Dist_for_Clusters[i][Boolean_WindRelated_for_Clusters[i] <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>])<span style="color:#f92672">/</span>len(Dist_for_Clusters[i])))
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>scatter(Dist_for_Clusters[i][Boolean_WindRelated_for_Clusters[i] <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>],\
</span></span><span style="display:flex;"><span>               [i]<span style="color:#f92672">*</span>len(Dist_for_Clusters[i][Boolean_WindRelated_for_Clusters[i] <span style="color:#f92672">==</span> <span style="color:#66d9ef">True</span>]), s<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;green&#34;</span>)
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>scatter(Dist_for_Clusters[i][Boolean_WindRelated_for_Clusters[i] <span style="color:#f92672">==</span> <span style="color:#66d9ef">False</span>],\
</span></span><span style="display:flex;"><span>               [i]<span style="color:#f92672">*</span>len(Dist_for_Clusters[i][Boolean_WindRelated_for_Clusters[i] <span style="color:#f92672">==</span> <span style="color:#66d9ef">False</span>]), s<span style="color:#f92672">=</span><span style="color:#ae81ff">0.05</span>, color<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;violet&#34;</span>)
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>axvline(np<span style="color:#f92672">.</span>mean(Dist_for_Clusters[i]), ymin <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.45</span><span style="color:#f92672">*</span>i, ymax <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.45</span><span style="color:#f92672">*</span>i<span style="color:#f92672">+</span><span style="color:#ae81ff">0.1</span>, color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;red&#34;</span>, linewidth<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>get_yaxis()<span style="color:#f92672">.</span>set_visible(<span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.5</span>, <span style="color:#ae81ff">0.01</span>, <span style="color:#e6db74">&#39;DTW distance&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.06</span>, <span style="color:#ae81ff">0.5</span>, <span style="color:#e6db74">&#39;Group number&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;vertical&#39;</span>)
</span></span></code></pre></div><pre tabindex="0"><code>Relevance for Cluster0 : 54.08%
Relevance for Cluster1 : 39.24%
Relevance for Cluster2 : 22.69%
</code></pre><p><img src="figures/6-1-4-6.png" alt="Python output"></p>
<p>The analysis results show that the smaller the DTW value, the higher the correlation between the inter-station azimuth and the wind direction, and vice versa. It can be seen that the similarity of the site data is indeed related to the wind direction of the ambient wind field, which also confirms our hypothesis and confirms that the diffusion of air pollutants is certainly affected by the wind direction of the ambient wind field.</p>
<h2 id="case-3-clustering-and-classification-application-of-water-and-meteorological-data">Case 3: Clustering and Classification Application of Water and Meteorological Data</h2>
<p>This case combines the application examples of data clustering and data classification. We use rain gauge data (Central Weather Bureau) and flood sensor data (Water Resource Agency) from Civil IoT Taiwan and use historical data analysis through data clustering to find the group of river water level stations most correlated with rainfall changes. We then use a data classification approach to predict whether a particular region will flood, given only rain gauge data.</p>
<h3 id="data-download-and-preprocessing-1">Data download and preprocessing</h3>
<p>We use the following codes to download all the sensing data of the rain gauge (Central Weather Bureau) and flood sensors (Water Resource Agency) in 2021 from the <a href="https://history.colife.org.tw/">historical database</a> of the Civil IoT Taiwan Data Service Platform and decompress the downloaded file into <code>/content</code> directory.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>wget <span style="color:#f92672">-</span>O <span style="color:#e6db74">&#39;Rain_2021.zip&#39;</span> <span style="color:#f92672">-</span>q <span style="color:#e6db74">&#34;https://history.colife.org.tw/?r=/download&amp;path=L%2Bawo%2BixoS</span><span style="color:#e6db74">%2F</span><span style="color:#e6db74">kuK3lpK7msKPosaHlsYBf6Zuo6YeP56uZLzIwMjEuemlw&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>wget <span style="color:#f92672">-</span>O <span style="color:#e6db74">&#39;Rain_Stataion.csv&#39;</span> <span style="color:#f92672">-</span>q <span style="color:#e6db74">&#34;https://history.colife.org.tw/?r=/download&amp;path=L%2Bawo%2BixoS</span><span style="color:#e6db74">%2F</span><span style="color:#e6db74">kuK3lpK7msKPosaHlsYBf6Zuo6YeP56uZL3JhaW5fc3RhdGlvbi5jc3Y%3D&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>unzip <span style="color:#f92672">-</span>q <span style="color:#e6db74">&#39;Rain_2021.zip&#39;</span> <span style="color:#f92672">&amp;&amp;</span> rm <span style="color:#e6db74">&#39;Rain_2021.zip&#39;</span> 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>find <span style="color:#e6db74">&#39;/content/2021&#39;</span> <span style="color:#f92672">-</span>name <span style="color:#e6db74">&#39;*.zip&#39;</span>  <span style="color:#f92672">-</span>exec unzip <span style="color:#f92672">-</span>q {} <span style="color:#f92672">-</span>d <span style="color:#e6db74">&#39;/content/Rain_2021_csv&#39;</span> \;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>rm <span style="color:#f92672">-</span>rf <span style="color:#e6db74">&#39;/content/2021&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>wget <span style="color:#f92672">-</span>O <span style="color:#e6db74">&#39;Flood_2021.zip&#39;</span> <span style="color:#f92672">-</span>q <span style="color:#e6db74">&#34;https://history.colife.org.tw/?r=/download&amp;path=L%2BawtOizh%2Ba6kC</span><span style="color:#e6db74">%2F</span><span style="color:#e6db74">msLTliKnnvbLvvIjoiIfnuKPluILmlL</span><span style="color:#e6db74">%2F</span><span style="color:#e6db74">lupzlkIjlu7rvvIlf5re55rC05oSf5ris5ZmoLzIwMjEuemlw&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>wget <span style="color:#f92672">-</span>O <span style="color:#e6db74">&#39;Flood_Stataion.csv&#39;</span> <span style="color:#f92672">-</span>q <span style="color:#e6db74">&#34;https://history.colife.org.tw/?r=/download&amp;path=L%2BawtOizh%2Ba6kC</span><span style="color:#e6db74">%2F</span><span style="color:#e6db74">msLTliKnnvbLvvIjoiIfnuKPluILmlL</span><span style="color:#e6db74">%2F</span><span style="color:#e6db74">lupzlkIjlu7rvvIlf5re55rC05oSf5ris5ZmoL3N0YXRpb25f5rC05Yip572y77yI6IiH57ij5biC5pS</span><span style="color:#e6db74">%2F</span><span style="color:#e6db74">5bqc5ZCI5bu677yJX%2Ba3ueawtOaEn%2Ba4rOWZqC5jc3Y%3D&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>unzip <span style="color:#f92672">-</span>q <span style="color:#e6db74">&#39;Flood_2021.zip&#39;</span> <span style="color:#f92672">&amp;&amp;</span> rm <span style="color:#e6db74">&#39;Flood_2021.zip&#39;</span> 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>find <span style="color:#e6db74">&#39;/content/2021&#39;</span> <span style="color:#f92672">-</span>name <span style="color:#e6db74">&#39;*_QC.zip&#39;</span>  <span style="color:#f92672">-</span>exec unzip <span style="color:#f92672">-</span>q {} <span style="color:#f92672">-</span>d <span style="color:#e6db74">&#39;/content/Flood_2021_csv&#39;</span> \;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">!</span>rm <span style="color:#f92672">-</span>rf <span style="color:#e6db74">&#39;/content/2021&#39;</span>
</span></span></code></pre></div><p>We first deal with the rain gauge data and delete the unnecessary fields <code>MIN_10</code>, <code>HOUR_6</code>, <code>HOUR_12</code>, and <code>NOW</code>. Then we remove the data after November and store the remaining records in <code>Rain_df</code>. We also import the information on rain gauges and keep it into <code>Rain_Station_df</code>. Since the amount of data processed in this step is huge, it will take a long time; please wait patiently.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>csv_files <span style="color:#f92672">=</span> glob<span style="color:#f92672">.</span>glob(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;/content/Rain_2021_csv&#34;</span>, <span style="color:#e6db74">&#34;*.csv&#34;</span>))
</span></span><span style="display:flex;"><span>csv_files<span style="color:#f92672">.</span>sort()
</span></span><span style="display:flex;"><span>Rain_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> csv_file <span style="color:#f92672">in</span> tqdm(csv_files):
</span></span><span style="display:flex;"><span>    tmp_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(csv_file, parse_dates<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;obsTime&#39;</span>])
</span></span><span style="display:flex;"><span>    tmp_df<span style="color:#f92672">.</span>drop([<span style="color:#e6db74">&#39;MIN_10&#39;</span>,<span style="color:#e6db74">&#39;HOUR_6&#39;</span>, <span style="color:#e6db74">&#39;HOUR_12&#39;</span>, <span style="color:#e6db74">&#39;NOW&#39;</span>], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        tmp_df <span style="color:#f92672">=</span> tmp_df<span style="color:#f92672">.</span>loc[tmp_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>]<span style="color:#f92672">.</span>dt<span style="color:#f92672">.</span>minute <span style="color:#f92672">==</span> <span style="color:#ae81ff">00</span>]
</span></span><span style="display:flex;"><span>        Rain_df <span style="color:#f92672">=</span>  pd<span style="color:#f92672">.</span>concat([Rain_df, tmp_df])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span>:
</span></span><span style="display:flex;"><span>        print(csv_file)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>Rain_df <span style="color:#f92672">=</span> Rain_df<span style="color:#f92672">.</span>loc[Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>] <span style="color:#f92672">&lt;</span> <span style="color:#e6db74">&#34;2021-11-01 00:00:00&#34;</span>]
</span></span><span style="display:flex;"><span>num <span style="color:#f92672">=</span> Rain_df<span style="color:#f92672">.</span>_get_numeric_data()
</span></span><span style="display:flex;"><span>num[num <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Rain_df<span style="color:#f92672">.</span>dropna(inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>Rain_df<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;station_id&#39;</span>,<span style="color:#e6db74">&#39;obsTime&#39;</span>], inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>Rain_Station_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;/content/Rain_Stataion.csv&#39;</span>)
</span></span><span style="display:flex;"><span>Rain_df
</span></span></code></pre></div><p><img src="figures/6-1-5-1.png" alt="Python output"></p>
<p>We also deal with the flood sensor data and remove the records after November. Then, we delete the records with missing values and store the remaining records in <code>Flood_df</code>. We also import the information on flood sensors and keep it into <code>Flood_Station_df</code>. The amount of data processed in this step is huge, and it will take a long time; please wait patiently.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>csv_files <span style="color:#f92672">=</span> glob<span style="color:#f92672">.</span>glob(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;/content/Flood_2021_csv&#34;</span>, <span style="color:#e6db74">&#34;*_QC.csv&#34;</span>))
</span></span><span style="display:flex;"><span>csv_files<span style="color:#f92672">.</span>sort()
</span></span><span style="display:flex;"><span>Flood_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> csv_file <span style="color:#f92672">in</span> tqdm(csv_files):
</span></span><span style="display:flex;"><span>    tmp_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(csv_file, parse_dates<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;timestamp&#39;</span>])
</span></span><span style="display:flex;"><span>    tmp_df <span style="color:#f92672">=</span> tmp_df<span style="color:#f92672">.</span>loc[(tmp_df[<span style="color:#e6db74">&#39;PQ_unit&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;cm&#39;</span>)]
</span></span><span style="display:flex;"><span>    Flood_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat([Flood_df,tmp_df], axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, ignore_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>Flood_df <span style="color:#f92672">=</span> Flood_df<span style="color:#f92672">.</span>loc[Flood_df[<span style="color:#e6db74">&#39;timestamp&#39;</span>] <span style="color:#f92672">&lt;</span> <span style="color:#e6db74">&#34;2021-11-01 00:00:00&#34;</span>]
</span></span><span style="display:flex;"><span>Flood_df<span style="color:#f92672">.</span>replace(<span style="color:#f92672">-</span><span style="color:#ae81ff">999.0</span>,<span style="color:#ae81ff">0.0</span>, inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>Flood_df<span style="color:#f92672">.</span>dropna(inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>Flood_df<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;timestamp&#39;</span>], inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>Flood_Station_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;/content/Flood_Stataion.csv&#39;</span>)
</span></span><span style="display:flex;"><span>Flood_df
</span></span></code></pre></div><p><img src="figures/6-1-5-2.png" alt="Python output"></p>
<h3 id="correlation-of-flood-sensors-and-rain-gauges">Correlation of flood sensors and rain gauges</h3>
<p>Due to the large amount of flood sensor data, we select the flood sensor number <code>43b2aec1-69b0-437b-b2a2-27c76a3949e8</code> located in Yunlin County and store its data in the <code>Flood_Site_df</code> object as an example of subsequent processing.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Flood_Site_df <span style="color:#f92672">=</span> Flood_df<span style="color:#f92672">.</span>loc[Flood_df[<span style="color:#e6db74">&#39;station_id&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;43b2aec1-69b0-437b-b2a2-27c76a3949e8&#39;</span>]
</span></span><span style="display:flex;"><span>Flood_Site_df<span style="color:#f92672">.</span>head()
</span></span></code></pre></div><p><img src="figures/6-1-5-3.png" alt="Python output"></p>
<p>We then compute the similarity between the rain gauge data and the selected flood sensor. We use Dynamic Time Warping (DTW) for our measurements. The smaller the value of DTW, the greater the similarity. To express the similarity more intuitively, we define the similarity in this example as the reciprocal of the DTW value and calculate the similarity between the selected flood sensor and all rain gauge data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Flood_Sensor_np <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([[v,v,v] <span style="color:#66d9ef">for</span> v <span style="color:#f92672">in</span> Flood_Site_df[<span style="color:#e6db74">&#39;value&#39;</span>]<span style="color:#f92672">.</span>to_numpy()])
</span></span><span style="display:flex;"><span>Site_dtw_Dist <span style="color:#f92672">=</span> dict()
</span></span><span style="display:flex;"><span>Rain_tmp_df <span style="color:#f92672">=</span> Rain_df<span style="color:#f92672">.</span>loc[(Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>]<span style="color:#f92672">.</span>dt<span style="color:#f92672">.</span>hour <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)]
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> Site <span style="color:#f92672">in</span> tqdm(np<span style="color:#f92672">.</span>unique(Rain_Station_df<span style="color:#f92672">.</span>loc[Rain_Station_df[<span style="color:#e6db74">&#39;city&#39;</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;雲林縣&#39;</span>][<span style="color:#e6db74">&#39;station_id&#39;</span>]<span style="color:#f92672">.</span>to_numpy())):
</span></span><span style="display:flex;"><span>    tmp_df <span style="color:#f92672">=</span> Rain_tmp_df<span style="color:#f92672">.</span>loc[(Rain_tmp_df[<span style="color:#e6db74">&#39;station_id&#39;</span>] <span style="color:#f92672">==</span> Site)]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> tmp_df<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>    tmp_np <span style="color:#f92672">=</span> tmp_df[[<span style="color:#e6db74">&#39;RAIN&#39;</span>,<span style="color:#e6db74">&#39;HOUR_3&#39;</span>,<span style="color:#e6db74">&#39;HOUR_24&#39;</span>]]<span style="color:#f92672">.</span>to_numpy()
</span></span><span style="display:flex;"><span>    Site_dtw_Dist[Site] <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span>fastdtw(Flood_Sensor_np, tmp_np, dist<span style="color:#f92672">=</span>euclidean)[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>Site_dtw_Dist <span style="color:#f92672">=</span> dict(sorted(Site_dtw_Dist<span style="color:#f92672">.</span>items(), key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> item: item[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>print(json<span style="color:#f92672">.</span>dumps(Site_dtw_Dist, indent<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, ensure_ascii<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>))
</span></span></code></pre></div><pre tabindex="0"><code>{
    &#34;88K590&#34;: 4.580649481044748e-05,
    &#34;C0K560&#34;: 4.744655320519647e-05,
    &#34;C0K490&#34;: 4.79216996101994e-05,
    &#34;C0K520&#34;: 5.038234963332513e-05,
    &#34;C0K420&#34;: 5.0674082994877385e-05,
    &#34;C0K250&#34;: 5.1021366345465985e-05,
    &#34;C0K280&#34;: 5.118406054309105e-05,
    &#34;A0K420&#34;: 5.1515699268157996e-05,
    &#34;C0K400&#34;: 5.178763059243615e-05,
    &#34;O1J810&#34;: 5.2282255279259976e-05,
    &#34;C0K240&#34;: 5.2470804312991397e-05,
    &#34;01J960&#34;: 5.334885670256585e-05,
    &#34;C0K470&#34;: 5.438256498969844e-05,
    &#34;81K580&#34;: 5.45854441959214e-05,
    &#34;C0K410&#34;: 5.5066753408217084e-05,
    &#34;A2K570&#34;: 5.520214274022887e-05,
    &#34;01J970&#34;: 5.529887546186233e-05,
    &#34;C0K480&#34;: 5.5374254960644355e-05,
    &#34;C0K460&#34;: 5.5657892623955056e-05,
    &#34;72K220&#34;: 5.5690175197363816e-05,
    &#34;C0K510&#34;: 5.5742273217039165e-05,
    &#34;C1K540&#34;: 5.618025674136218e-05,
    &#34;C0K550&#34;: 5.621240903075098e-05,
    &#34;C0K450&#34;: 5.62197509062689e-05,
    &#34;C0K291&#34;: 5.6380522616008906e-05,
    &#34;C0K330&#34;: 5.638960953991442e-05,
    &#34;C0K530&#34;: 5.6525582441919285e-05,
    &#34;C0K500&#34;: 5.6825555408648244e-05,
    &#34;C0K440&#34;: 5.692254536595e-05,
    &#34;C0K430&#34;: 5.697351917955081e-05,
    &#34;01J930&#34;: 5.7648109890427854e-05,
    &#34;C0K580&#34;: 5.770344946580767e-05,
    &#34;C0K390&#34;: 5.782553930260475e-05,
    &#34;01J100&#34;: 5.7933240408734325e-05,
    &#34;01K060&#34;: 5.8343415644572526e-05
}
</code></pre><h3 id="data-clustering-to-find-highly-correlated-rain-gauges">Data clustering to find highly correlated rain gauges</h3>
<p>We divide the rain gauges into three groups according to the similarity relationship through the clustering algorithm, and find out the group with the highest similarity and the codes of the rain gauges in this group. In our example, we found three clusters with 9, 23, and 3 rain gauges, and the second cluster had the time series data most similar to the flood sensor data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>cluster_model <span style="color:#f92672">=</span> KMeans(n_clusters<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)<span style="color:#f92672">.</span>fit([[value] <span style="color:#66d9ef">for</span> _, value <span style="color:#f92672">in</span> Site_dtw_Dist<span style="color:#f92672">.</span>items()])
</span></span><span style="display:flex;"><span>Result <span style="color:#f92672">=</span> cluster_model<span style="color:#f92672">.</span>labels_
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> np<span style="color:#f92672">.</span>unique(Result):
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Number of Cluster </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> : </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(i,len(Result[Result<span style="color:#f92672">==</span>i])))
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">3</span>), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.5</span>, <span style="color:#ae81ff">0.01</span>, <span style="color:#e6db74">&#39;DTW distance&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>text(<span style="color:#ae81ff">0.06</span>, <span style="color:#ae81ff">0.5</span>, <span style="color:#e6db74">&#39;Group number&#39;</span>, ha<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, va<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;center&#39;</span>, rotation<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;vertical&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Site_DTW_Numpy <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([value <span style="color:#66d9ef">for</span> _, value <span style="color:#f92672">in</span> Site_dtw_Dist<span style="color:#f92672">.</span>items()])
</span></span><span style="display:flex;"><span>Site_Name_Numpy <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array([key <span style="color:#66d9ef">for</span> key, _ <span style="color:#f92672">in</span> Site_dtw_Dist<span style="color:#f92672">.</span>items()])
</span></span><span style="display:flex;"><span>Mean_Dis_For_Cluster <span style="color:#f92672">=</span> [<span style="color:#66d9ef">None</span>] <span style="color:#f92672">*</span> len(np<span style="color:#f92672">.</span>unique(Result))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> np<span style="color:#f92672">.</span>unique(Result):
</span></span><span style="display:flex;"><span>    Mean_Dis_For_Cluster[i] <span style="color:#f92672">=</span> (np<span style="color:#f92672">.</span>mean(Site_DTW_Numpy[Result<span style="color:#f92672">==</span>i]))
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>scatter(Site_DTW_Numpy[Result<span style="color:#f92672">==</span>i],[i]<span style="color:#f92672">*</span>len(Site_DTW_Numpy[Result<span style="color:#f92672">==</span>i]), s<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Mean Distance of Cluster </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> : </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(i,Mean_Dis_For_Cluster[i]))
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>get_yaxis()<span style="color:#f92672">.</span>set_visible(<span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>Best_Cluster <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>where(Mean_Dis_For_Cluster <span style="color:#f92672">==</span> np<span style="color:#f92672">.</span>amax(Mean_Dis_For_Cluster))[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>Best_Site <span style="color:#f92672">=</span> Site_Name_Numpy[Result <span style="color:#f92672">==</span> Best_Cluster]
</span></span><span style="display:flex;"><span>print(Best_Site)
</span></span></code></pre></div><pre tabindex="0"><code>Number of Cluster0 : 23
Number of Cluster1 : 3
Number of Cluster2 : 9
Mean Similarity of Cluster0 : 5.6307994901628334e-05
Mean Similarity of Cluster1 : 4.7058249208614454e-05
Mean Similarity of Cluster2 : 5.1629678408018994e-05
[&#39;C0K470&#39; &#39;81K580&#39; &#39;C0K410&#39; &#39;A2K570&#39; &#39;01J970&#39; &#39;C0K480&#39; &#39;C0K460&#39; &#39;72K220&#39;
 &#39;C0K510&#39; &#39;C1K540&#39; &#39;C0K550&#39; &#39;C0K450&#39; &#39;C0K291&#39; &#39;C0K330&#39; &#39;C0K530&#39; &#39;C0K500&#39;
 &#39;C0K440&#39; &#39;C0K430&#39; &#39;01J930&#39; &#39;C0K580&#39; &#39;C0K390&#39; &#39;01J100&#39; &#39;01K060&#39;]
</code></pre><p><img src="figures/6-1-5-4.png" alt="Python output"></p>
<p>To better understand the correlation between the flood sensor and the 23 rain gauges, we plotted the sensing data of this selected flood sensor in chronological order.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>tmp<span style="color:#f92672">=</span> Flood_Site_df[<span style="color:#e6db74">&#39;value&#39;</span>]<span style="color:#f92672">.</span>to_numpy()
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">3</span>), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>plot(range(len(tmp)),tmp, linewidth<span style="color:#f92672">=</span><span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;Time sequence&#39;</span>)
</span></span><span style="display:flex;"><span>ax<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;Water level&#39;</span>)
</span></span></code></pre></div><p><img src="figures/6-1-5-5.png" alt="Python output"></p>
<p>We then plotted hourly rainfall data chronologically from the 23 rain gauges in the most similar group into 23 graphs. The figures also show that when the value of the flood sensor is high, the value of the rain gauge also increases. The changing trends of the two are indeed very similar, which is in line with our common sense expectations.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>figure(figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>(len(Best_Site)<span style="color:#f92672">//</span><span style="color:#ae81ff">4</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)), dpi<span style="color:#f92672">=</span><span style="color:#ae81ff">150</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i, Site <span style="color:#f92672">in</span> enumerate(Best_Site):
</span></span><span style="display:flex;"><span>    tmp <span style="color:#f92672">=</span> Rain_df<span style="color:#f92672">.</span>loc[Rain_df[<span style="color:#e6db74">&#39;station_id&#39;</span>]<span style="color:#f92672">==</span>Site][<span style="color:#e6db74">&#39;RAIN&#39;</span>]
</span></span><span style="display:flex;"><span>    ax <span style="color:#f92672">=</span> fig<span style="color:#f92672">.</span>add_subplot(len(Best_Site)<span style="color:#f92672">//</span><span style="color:#ae81ff">4</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>,i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    ax<span style="color:#f92672">.</span>plot(range(len(tmp)),tmp, linewidth<span style="color:#f92672">=</span><span style="color:#ae81ff">0.5</span>)
</span></span></code></pre></div><p><img src="figures/6-1-5-6.png" alt="Python output"></p>
<h3 id="data-classification-to-predict-flooding-by-rainfall-data">Data classification to predict flooding by rainfall data</h3>
<p>Next, we use the flood data recorded by the selected flood sensors as labels and use the best similarity group of rain gauges to build a simple classifier to predict whether flooding occurs at the location of the flood sensor. We divide the original data from January 2021 to October 2021 into the training data (the first seven months) and the test data (the next two months). Then we mark the data with a value greater than 0 in the flood sensor as a flood event, and data with a value of 0 is marked as having no flood events. We store the sorted data in the training data <code>Train_DataSet</code> object.</p>
<p>Note: In this example, based on the principle of ease of use, the most lenient standard is adopted, and events with a water level greater than 0 are identified as flood events. But in fact, there are stricter regulations for determining flood events. For proper use, it is recommended to carry out identification following relevant laws and regulations.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Flooding <span style="color:#f92672">=</span> Flood_Site_df<span style="color:#f92672">.</span>loc[(Flood_Site_df[<span style="color:#e6db74">&#39;value&#39;</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0.0</span>) <span style="color:#f92672">&amp;</span> (Flood_Site_df[<span style="color:#e6db74">&#39;timestamp&#39;</span>] <span style="color:#f92672">&lt;</span> <span style="color:#e6db74">&#34;2021-08-01 00:00:00&#34;</span>)][[<span style="color:#e6db74">&#39;timestamp&#39;</span>, <span style="color:#e6db74">&#39;value&#39;</span>]]<span style="color:#f92672">.</span>values
</span></span><span style="display:flex;"><span>Not_Flooding <span style="color:#f92672">=</span> Flood_Site_df<span style="color:#f92672">.</span>loc[(Flood_Site_df[<span style="color:#e6db74">&#39;value&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0.0</span>) <span style="color:#f92672">&amp;</span> (Flood_Site_df[<span style="color:#e6db74">&#39;timestamp&#39;</span>] <span style="color:#f92672">&lt;</span> <span style="color:#e6db74">&#34;2021-08-01 00:00:00&#34;</span>)][[<span style="color:#e6db74">&#39;timestamp&#39;</span>, <span style="color:#e6db74">&#39;value&#39;</span>]]\
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">.</span>sample(n<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span><span style="color:#f92672">*</span>len(Flooding))<span style="color:#f92672">.</span>values
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Train_DataSet <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;x&#39;</span>:[], <span style="color:#e6db74">&#39;y&#39;</span>:[]}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> timestamp, _ <span style="color:#f92672">in</span>  tqdm(Flooding):
</span></span><span style="display:flex;"><span>    tmp_x <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    tmp_df <span style="color:#f92672">=</span> Rain_df<span style="color:#f92672">.</span>loc[(Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>] <span style="color:#f92672">&lt;</span> (timestamp <span style="color:#f92672">-</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>))) <span style="color:#f92672">&amp;</span> (Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>] <span style="color:#f92672">&gt;</span> (timestamp <span style="color:#f92672">-</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span>)))]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> Site <span style="color:#f92672">in</span> Best_Site:
</span></span><span style="display:flex;"><span>        Site_tmp_df <span style="color:#f92672">=</span> tmp_df<span style="color:#f92672">.</span>loc[(tmp_df[<span style="color:#e6db74">&#39;station_id&#39;</span>]<span style="color:#f92672">==</span>Site)]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> Site_tmp_df<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>            tmp_x<span style="color:#f92672">.</span>append(Site_tmp_df<span style="color:#f92672">.</span>tail(<span style="color:#ae81ff">24</span>)[[<span style="color:#e6db74">&#39;RAIN&#39;</span>, <span style="color:#e6db74">&#39;HOUR_3&#39;</span>]]<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>flatten())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> len(tmp_x) <span style="color:#f92672">&lt;</span> len(Best_Site):
</span></span><span style="display:flex;"><span>        tmp_x<span style="color:#f92672">.</span>append(tmp_x[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>    tmp_x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(tmp_x)<span style="color:#f92672">.</span>flatten()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(tmp_x) <span style="color:#f92672">==</span> <span style="color:#ae81ff">24</span><span style="color:#f92672">*</span>len(Best_Site)<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>        Train_DataSet[<span style="color:#e6db74">&#39;x&#39;</span>]<span style="color:#f92672">.</span>append(tmp_x)
</span></span><span style="display:flex;"><span>        Train_DataSet[<span style="color:#e6db74">&#39;y&#39;</span>]<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> timestamp, _ <span style="color:#f92672">in</span>  tqdm(Not_Flooding):
</span></span><span style="display:flex;"><span>    tmp_x <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    tmp_df <span style="color:#f92672">=</span> Rain_df<span style="color:#f92672">.</span>loc[(Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>] <span style="color:#f92672">&lt;</span> (timestamp <span style="color:#f92672">-</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>))) <span style="color:#f92672">&amp;</span> (Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>] <span style="color:#f92672">&gt;</span> (timestamp <span style="color:#f92672">-</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span>)))]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> Site <span style="color:#f92672">in</span> Best_Site:
</span></span><span style="display:flex;"><span>        Site_tmp_df <span style="color:#f92672">=</span> tmp_df<span style="color:#f92672">.</span>loc[(tmp_df[<span style="color:#e6db74">&#39;station_id&#39;</span>]<span style="color:#f92672">==</span>Site)]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> Site_tmp_df<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>            tmp_x<span style="color:#f92672">.</span>append(Site_tmp_df<span style="color:#f92672">.</span>tail(<span style="color:#ae81ff">24</span>)[[<span style="color:#e6db74">&#39;RAIN&#39;</span>, <span style="color:#e6db74">&#39;HOUR_3&#39;</span>]]<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>flatten())
</span></span><span style="display:flex;"><span>    tmp_x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(tmp_x)<span style="color:#f92672">.</span>flatten()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(tmp_x) <span style="color:#f92672">==</span> <span style="color:#ae81ff">24</span><span style="color:#f92672">*</span>len(Best_Site)<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>        Train_DataSet[<span style="color:#e6db74">&#39;x&#39;</span>]<span style="color:#f92672">.</span>append(tmp_x)
</span></span><span style="display:flex;"><span>        Train_DataSet[<span style="color:#e6db74">&#39;y&#39;</span>]<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><p>In the same way, we mark the data with a value greater than 0 in the flood sensor from August 2021 to October 2021 as a flood event, and the data with a value equal to 0 as a non-flood event. We store the sorted data in the test data <code>Test_DataSet</code> object.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>Flooding <span style="color:#f92672">=</span> Flood_Site_df<span style="color:#f92672">.</span>loc[(Flood_Site_df[<span style="color:#e6db74">&#39;value&#39;</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0.0</span>) <span style="color:#f92672">&amp;</span> (Flood_Site_df[<span style="color:#e6db74">&#39;timestamp&#39;</span>] <span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;2021-08-01 00:00:00&#34;</span>)][[<span style="color:#e6db74">&#39;timestamp&#39;</span>, <span style="color:#e6db74">&#39;value&#39;</span>]]<span style="color:#f92672">.</span>values
</span></span><span style="display:flex;"><span>Not_Flooding <span style="color:#f92672">=</span> Flood_Site_df<span style="color:#f92672">.</span>loc[(Flood_Site_df[<span style="color:#e6db74">&#39;value&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0.0</span>) <span style="color:#f92672">&amp;</span> (Flood_Site_df[<span style="color:#e6db74">&#39;timestamp&#39;</span>] <span style="color:#f92672">&gt;</span> <span style="color:#e6db74">&#34;2021-08-01 00:00:00&#34;</span>)][[<span style="color:#e6db74">&#39;timestamp&#39;</span>, <span style="color:#e6db74">&#39;value&#39;</span>]]\
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">.</span>sample(n<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>len(Flooding))<span style="color:#f92672">.</span>values
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Test_DataSet <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;x&#39;</span>:[], <span style="color:#e6db74">&#39;y&#39;</span>:[]}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> timestamp, _ <span style="color:#f92672">in</span>  tqdm(Flooding):
</span></span><span style="display:flex;"><span>    tmp_x <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    tmp_df <span style="color:#f92672">=</span> Rain_df<span style="color:#f92672">.</span>loc[(Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>] <span style="color:#f92672">&lt;</span> (timestamp <span style="color:#f92672">-</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>))) <span style="color:#f92672">&amp;</span> (Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>] <span style="color:#f92672">&gt;</span> (timestamp <span style="color:#f92672">-</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span>)))]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> Site <span style="color:#f92672">in</span> Best_Site:
</span></span><span style="display:flex;"><span>        Site_tmp_df <span style="color:#f92672">=</span> tmp_df<span style="color:#f92672">.</span>loc[(tmp_df[<span style="color:#e6db74">&#39;station_id&#39;</span>]<span style="color:#f92672">==</span>Site)]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> Site_tmp_df<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>            tmp_x<span style="color:#f92672">.</span>append(Site_tmp_df<span style="color:#f92672">.</span>tail(<span style="color:#ae81ff">24</span>)[[<span style="color:#e6db74">&#39;RAIN&#39;</span>, <span style="color:#e6db74">&#39;HOUR_3&#39;</span>]]<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>flatten())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> len(tmp_x) <span style="color:#f92672">&lt;</span> len(Best_Site):
</span></span><span style="display:flex;"><span>        tmp_x<span style="color:#f92672">.</span>append(tmp_x[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>    tmp_x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(tmp_x)<span style="color:#f92672">.</span>flatten()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(tmp_x) <span style="color:#f92672">==</span> <span style="color:#ae81ff">24</span><span style="color:#f92672">*</span>len(Best_Site)<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>        Test_DataSet[<span style="color:#e6db74">&#39;x&#39;</span>]<span style="color:#f92672">.</span>append(tmp_x)
</span></span><span style="display:flex;"><span>        Test_DataSet[<span style="color:#e6db74">&#39;y&#39;</span>]<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> timestamp, _ <span style="color:#f92672">in</span>  tqdm(Not_Flooding):
</span></span><span style="display:flex;"><span>    tmp_x <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    tmp_df <span style="color:#f92672">=</span> Rain_df<span style="color:#f92672">.</span>loc[(Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>] <span style="color:#f92672">&lt;</span> (timestamp <span style="color:#f92672">-</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>))) <span style="color:#f92672">&amp;</span> (Rain_df[<span style="color:#e6db74">&#39;obsTime&#39;</span>] <span style="color:#f92672">&gt;</span> (timestamp <span style="color:#f92672">-</span> timedelta(hours<span style="color:#f92672">=</span><span style="color:#ae81ff">60</span>)))]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> Site <span style="color:#f92672">in</span> Best_Site:
</span></span><span style="display:flex;"><span>        Site_tmp_df <span style="color:#f92672">=</span> tmp_df<span style="color:#f92672">.</span>loc[(tmp_df[<span style="color:#e6db74">&#39;station_id&#39;</span>]<span style="color:#f92672">==</span>Site)]
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> Site_tmp_df<span style="color:#f92672">.</span>empty:
</span></span><span style="display:flex;"><span>            tmp_x<span style="color:#f92672">.</span>append(Site_tmp_df<span style="color:#f92672">.</span>tail(<span style="color:#ae81ff">24</span>)[[<span style="color:#e6db74">&#39;RAIN&#39;</span>, <span style="color:#e6db74">&#39;HOUR_3&#39;</span>]]<span style="color:#f92672">.</span>values<span style="color:#f92672">.</span>flatten())
</span></span><span style="display:flex;"><span>    tmp_x <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(tmp_x)<span style="color:#f92672">.</span>flatten()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(tmp_x) <span style="color:#f92672">==</span> <span style="color:#ae81ff">24</span><span style="color:#f92672">*</span>len(Best_Site)<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>        Test_DataSet[<span style="color:#e6db74">&#39;x&#39;</span>]<span style="color:#f92672">.</span>append(tmp_x)
</span></span><span style="display:flex;"><span>        Test_DataSet[<span style="color:#e6db74">&#39;y&#39;</span>]<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><p>We use the classifier model provided by the Python package Scikit Learn (sklearn) for training and testing. We use nine models in a series of examples, including nearest neighbor, linear SVM, RBF SVM, decision tree, random forest, neural network, Adaboost, Naive Bayes, and QDA. We sequentially introduce training data for adjustment and then test data for prediction. We compare the test data with the label content in the predicted results and use a <a href="https://en.wikipedia.org/wiki/Confusion_matrix">confusion matrix</a> to present the classification results for different label combinations.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>names <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Nearest Neighbors&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Linear SVM&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;RBF SVM&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Decision Tree&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Random Forest&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Neural Net&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;AdaBoost&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Naive Bayes&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;QDA&#34;</span>,
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>classifiers <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    KNeighborsClassifier(<span style="color:#ae81ff">3</span>),
</span></span><span style="display:flex;"><span>    SVC(kernel<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;linear&#34;</span>, C<span style="color:#f92672">=</span><span style="color:#ae81ff">0.025</span>),
</span></span><span style="display:flex;"><span>    SVC(gamma<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>, C<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>    DecisionTreeClassifier(max_depth<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>),
</span></span><span style="display:flex;"><span>    RandomForestClassifier(max_depth<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>, n_estimators<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>, max_features<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>    MLPClassifier(alpha<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, max_iter<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>),
</span></span><span style="display:flex;"><span>    AdaBoostClassifier(),
</span></span><span style="display:flex;"><span>    GaussianNB(),
</span></span><span style="display:flex;"><span>    QuadraticDiscriminantAnalysis(),
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">3</span>,figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">18</span>, <span style="color:#ae81ff">13.5</span>))
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i, model <span style="color:#f92672">in</span> enumerate(classifiers):
</span></span><span style="display:flex;"><span>    model<span style="color:#f92672">.</span>fit(Train_DataSet[<span style="color:#e6db74">&#39;x&#39;</span>], Train_DataSet[<span style="color:#e6db74">&#39;y&#39;</span>])
</span></span><span style="display:flex;"><span>    Result <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>predict(Test_DataSet[<span style="color:#e6db74">&#39;x&#39;</span>])
</span></span><span style="display:flex;"><span>    mat <span style="color:#f92672">=</span> confusion_matrix(Test_DataSet[<span style="color:#e6db74">&#39;y&#39;</span>], Result)
</span></span><span style="display:flex;"><span>    sns<span style="color:#f92672">.</span>heatmap(mat<span style="color:#f92672">.</span>T, square<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, annot<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, fmt<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;d&#39;</span>, cbar<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>,
</span></span><span style="display:flex;"><span>                xticklabels<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;不淹水&#34;</span>,<span style="color:#e6db74">&#34;淹水&#34;</span>], yticklabels<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#34;不淹水&#34;</span>,<span style="color:#e6db74">&#34;淹水&#34;</span>], ax <span style="color:#f92672">=</span> axes[i<span style="color:#f92672">//</span><span style="color:#ae81ff">3</span>][i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>])
</span></span><span style="display:flex;"><span>    axes[i<span style="color:#f92672">//</span><span style="color:#ae81ff">3</span>][i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">,  Accuracy : </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(names[i], round(accuracy_score(Result, Test_DataSet[<span style="color:#e6db74">&#39;y&#39;</span>]), <span style="color:#ae81ff">3</span>)), fontweight<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;bold&#34;</span>, size<span style="color:#f92672">=</span><span style="color:#ae81ff">13</span>)
</span></span><span style="display:flex;"><span>    axes[i<span style="color:#f92672">//</span><span style="color:#ae81ff">3</span>][i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;true label&#39;</span>, fontsize <span style="color:#f92672">=</span> <span style="color:#ae81ff">10.0</span>)
</span></span><span style="display:flex;"><span>    axes[i<span style="color:#f92672">//</span><span style="color:#ae81ff">3</span>][i<span style="color:#f92672">%</span><span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>set_ylabel(<span style="color:#e6db74">&#39;predicted label&#39;</span>, fontsize <span style="color:#f92672">=</span> <span style="color:#ae81ff">10.0</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>tight_layout()
</span></span></code></pre></div><p><img src="figures/6-1-5-7.png" alt="Python output"></p>
<p>In this case, we found that the nearest neighbor method can achieve a classification success rate of nearly 7.3%. This is just the result of using raw data without further processing and analysis. If we do more research on the data itself, we still have the potential to continue to improve the classification success rate. Readers interested in classifiers can refer to related resources for more in-depth exploration, which will further enhance the ability of classifiers to classify different types of data.</p>
<h2 id="references">References</h2>
<ul>
<li>Ibrahim Saidi, Your First Machine Learning Project in Python, Medium, Jan, 2022, (<a href="https://ibrahimsaidi.com.au/your-first-machine-learning-project-in-python-e3b90170ae41">https://ibrahimsaidi.com.au/your-first-machine-learning-project-in-python-e3b90170ae41</a>)</li>
<li>Esmaeil Alizadeh, An Illustrative Introduction to Dynamic Time Warping, Medium, Oct. 2020, (<a href="https://towardsdatascience.com/an-illustrative-introduction-to-dynamic-time-warping-36aa98513b98">https://towardsdatascience.com/an-illustrative-introduction-to-dynamic-time-warping-36aa98513b98</a>)</li>
<li>Jason Brownlee, 10 Clustering Algorithms With Python, Machine Learning Mastery, Aug. 2020, (<a href="https://machinelearningmastery.com/clustering-algorithms-with-python/">https://machinelearningmastery.com/clustering-algorithms-with-python/</a>)</li>
<li>Alexandra Amidon, How to Apply K-means Clustering to Time Series Data, TOwards Data Science, July 2020, (<a href="https://towardsdatascience.com/how-to-apply-k-means-clustering-to-time-series-data-28d04a8f7da3">https://towardsdatascience.com/how-to-apply-k-means-clustering-to-time-series-data-28d04a8f7da3</a>)</li>
<li>scikit-learn Tutorials (<a href="https://scikit-learn.org/stable/tutorial/index.html">https://scikit-learn.org/stable/tutorial/index.html</a>)</li>
<li>scikit-learn Classifier comparison (<a href="https://scikit-learn.org/stable/auto_examples/classification/plot_classifier_comparison.html">https://scikit-learn.org/stable/auto_examples/classification/plot_classifier_comparison.html</a>)</li>
<li>FastDTW - A Python implementation of FastDTW, (<a href="https://github.com/slaypni/fastdtw">https://github.com/slaypni/fastdtw</a>)</li>
<li>Nearest Neighbors - Wikipedia, (<a href="https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm">https://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm</a>)</li>
<li>SVM Classifier - Wikipedia, (<a href="https://en.wikipedia.org/wiki/Support-vector_machine">https://en.wikipedia.org/wiki/Support-vector_machine</a>)</li>
<li>Decision Tree - Wikipedia, (<a href="https://en.wikipedia.org/wiki/Decision_tree">https://en.wikipedia.org/wiki/Decision_tree</a>)</li>
<li>Random Forest - Wikipedia, (<a href="https://en.wikipedia.org/wiki/Random_forest">https://en.wikipedia.org/wiki/Random_forest</a>)</li>
<li>K-Means - Wikipedia, (<a href="https://en.wikipedia.org/wiki/K-means_clustering">https://en.wikipedia.org/wiki/K-means_clustering</a>)</li>
<li>DBSCAN - Wikipedia, (<a href="https://en.wikipedia.org/wiki/DBSCAN">https://en.wikipedia.org/wiki/DBSCAN</a>)</li>
<li>Hierarchical Clustering - Wikipedia, (<a href="https://en.wikipedia.org/wiki/Hierarchical_clustering">https://en.wikipedia.org/wiki/Hierarchical_clustering</a>)</li>
<li>BIRCH - Wikipedia, (<a href="https://en.wikipedia.org/wiki/BIRCH">https://en.wikipedia.org/wiki/BIRCH</a>)</li>
<li>Confusion matrix - Wikipedia, (<a href="https://en.wikipedia.org/wiki/Confusion_matrix#Confusion_matrices_with_more_than_two_categories">https://en.wikipedia.org/wiki/Confusion_matrix#Confusion_matrices_with_more_than_two_categories</a>)</li>
</ul>

            <footer class="footline">
            </footer>
          </article>


<div align="center">
<hr width="70%">

This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.
<br />
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/"><img alt="Creative Commons License" style="border-width:0;margin:2px" src="https://i.creativecommons.org/l/by/3.0/88x31.png" /></a>
</div>
<p style="height:30px">

<div id="disqus_thread" style="border-style: ridge; padding-inline:5px"></div>
<script type="text/javascript">

(function() {
    
    
    
    

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'learnciot';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        </div>
      </main>
    </div>
    <aside id="sidebar" class="default-animation showVisitedLinks">
      <div id="header-wrapper" class="default-animation">
        <div id="header" class="default-animation">
          <style>
            #logo svg,
            #logo svg * {
              color: #282828;
              color: var(--MENU-SECTIONS-BG-color);
              fill: #282828 !important;
              fill: var(--MENU-SECTIONS-BG-color) !important;
              opacity: .945;
            }
            a#logo {
              color: #282828;
              color: var(--MENU-SECTIONS-BG-color);
              font-family: 'Work Sans', 'Helvetica', 'Tahoma', 'Geneva', 'Arial', sans-serif;
              font-size: 30px;
              font-weight: 300;
              margin-top: -13px;
              max-width: 60%;
              text-transform: uppercase;
              width: 226px;
              white-space: nowrap;
            }
            a#logo:hover {
              color: #282828;
              color: var(--MENU-SECTIONS-BG-color);
            }
            #logo svg {
              margin-bottom: -20px;
              margin-left: -23.5px;
              width: 40.5%;
            }
            @media only all and (max-width: 59.938em) {
              a#logo {
                font-size: 25px;
                margin-top: -3px;
              }
              #logo svg {
                margin-bottom: -12px;
                margin-left: -23px;
              }
            }
            @media all and (-ms-high-contrast:none) {
              /* IE11s understanding of positioning is weird at best */
              a#logo {
                margin-top: -58px;
              }
              #logo svg {
                margin-bottom: -62px;
              }
            }
          </style>
          <a id="logo" href="/en/">
            Learn CIoT
          </a>

        </div>
        <div class="searchbox default-animation">
          <label class="a11y-only" for="search-by">Search</label>
          <i class="fas fa-search"></i>
          <input data-search-input id="search-by" type="search" placeholder="Search...">
          <span data-search-clear=""><i class="fas fa-times"></i></span>
        </div>
        <script>
          var contentLangs=['en'];
        </script>
        <script src="/js/auto-complete.js?1697343146" defer></script>
        <script src="/js/lunr.min.js?1697343146" defer></script>
        <script src="/js/lunr.stemmer.support.min.js?1697343146" defer></script>
        <script src="/js/lunr.multi.min.js?1697343146" defer></script>
        <script src="/js/lunr.en.min.js?1697343146" defer></script>
        <script src="/js/search.js?1697343146" defer></script>
      </div>
      <div id="content-wrapper" class="highlightable">
        <ul class="topics">
          <li data-nav-id="/en/ch1/" title="1. Introduction" class="dd-item"><a href="/en/ch1/">1. Introduction<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch2/" title="2. Overview of the Materials" class="dd-item"><label for="section-8824f0908e4fd15c767980c76e6fd82a" ></label><a href="/en/ch2/">2. Overview of the Materials<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/en/ch2/ch2.1/" title="2.1. Material Architecture" class="dd-item"><a href="/en/ch2/ch2.1/">2.1. Material Architecture<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch2/ch2.2/" title="2.2. Material Tools" class="dd-item"><a href="/en/ch2/ch2.2/">2.2. Material Tools<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/en/ch3/" title="3. Data Access" class="dd-item"><label for="section-8b3bcaa38467a39b2570f38fd8603d10" ></label><a href="/en/ch3/">3. Data Access<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/en/ch3/ch3.1/" title="3.1. Basic Data Access Methods" class="dd-item"><a href="/en/ch3/ch3.1/">3.1. Basic Data Access Methods<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch3/ch3.2/" title="3.2. Data Access under Spatial or Temporal Conditions" class="dd-item"><a href="/en/ch3/ch3.2/">3.2. Data Access under Spatial or Temporal Conditions<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/en/ch4/" title="4. Time Series Data Analysis" class="dd-item"><label for="section-b911da0d9c15f301a7d3deea0e716021" ></label><a href="/en/ch4/">4. Time Series Data Analysis<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/en/ch4/ch4.1/" title="4.1. Time Series Data Processing" class="dd-item"><a href="/en/ch4/ch4.1/">4.1. Time Series Data Processing<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch4/ch4.2/" title="4.2. Time Series Data Forecast" class="dd-item"><a href="/en/ch4/ch4.2/">4.2. Time Series Data Forecast<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch4/ch4.3/" title="4.3. Time Series Data Clustering" class="dd-item"><a href="/en/ch4/ch4.3/">4.3. Time Series Data Clustering<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/en/ch5/" title="5. Spatial Data Analysis" class="dd-item"><label for="section-adab050366c685297e1eadc5faf1472e" ></label><a href="/en/ch5/">5. Spatial Data Analysis<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/en/ch5/ch5.1/" title="5.1. Geospatial Filtering" class="dd-item"><a href="/en/ch5/ch5.1/">5.1. Geospatial Filtering<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch5/ch5.2/" title="5.2. Geospatial Analysis" class="dd-item"><a href="/en/ch5/ch5.2/">5.2. Geospatial Analysis<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/en/ch6/" title="6. Data Applications" class="dd-item parent"><label for="section-4be7f7872a5d83dfd50bf0f4ff5c2761" ></label><a href="/en/ch6/">6. Data Applications<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/en/ch6/ch6.1/" title="6.1. Machine Learning Preliminaries" class="dd-item active"><a href="/en/ch6/ch6.1/">6.1. Machine Learning Preliminaries<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch6/ch6.2/" title="6.2. Anomaly Detection" class="dd-item"><a href="/en/ch6/ch6.2/">6.2. Anomaly Detection<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch6/ch6.3/" title="6.3. Joint Data Calibration" class="dd-item"><a href="/en/ch6/ch6.3/">6.3. Joint Data Calibration<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/en/ch7/" title="7. System Applications" class="dd-item"><label for="section-af7207ef140cc843a4d69557766c672f" ></label><a href="/en/ch7/">7. System Applications<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/en/ch7/ch7.1/" title="7.1. QGIS Application" class="dd-item"><a href="/en/ch7/ch7.1/">7.1. QGIS Application<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch7/ch7.2/" title="7.2. Tableau Application" class="dd-item"><a href="/en/ch7/ch7.2/">7.2. Tableau Application<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/en/ch7/ch7.3/" title="7.3. Leafmap Applications" class="dd-item"><a href="/en/ch7/ch7.3/">7.3. Leafmap Applications<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/en/about/" title="About" class="dd-item"><a href="/en/about/">About<i class="fas fa-check read-icon"></i></a></li>
        </ul>
        <div id="shortcuts">
          <div class="nav-title">More</div>
          <ul>
            <li><a class="padding" href="https://github.com/LearnCIOT/LearnCIOT.github.io"><i class='fab fa-fw fa-github'></i> GitHub repo</a></li>
            <li><a class="padding" href="/en/levels/"><i class='fas fa-fw fa-heartbeat'></i> Search by difficulty</a></li>
            <li><a class="padding" href="/en/tags/"><i class='fas fa-fw fa-tags'></i> Search by topics</a></li>
            <li><a class="padding" href="/en/authors/"><i class='fas fa-fw fa-users'></i> Search by authors</a></li>
          </ul>
        </div>
        <div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVisitedLinks showFooter"></div>
        <hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showLangSwitch showVisitedLinks showFooter"/>
        <div id="prefooter" class="footerLangSwitch footerVariantSwitch footerVisitedLinks showLangSwitch showVisitedLinks">
          <ul>
            <li id="select-language-container" class="footerLangSwitch showLangSwitch">
              <a class="padding select-container">
                <i class="fas fa-language fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-language" onchange="location = baseUri + this.value;">
                    <option id="en" value="/en/ch6/ch6.1/" selected>English</option>
                    <option id="zh-tw" value="/ch6/ch6.1/">中文</option>
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
            </li>
            <li id="select-variant-container" class="footerVariantSwitch">
              <a class="padding select-container">
                <i class="fas fa-paint-brush fa-fw"></i>
                <span>&nbsp;</span>
                <div class="select-style">
                  <select id="select-variant" onchange="window.variants && variants.changeVariant( this.value );">
                    <option id="relearn-light" value="relearn-light" selected>Relearn Light</option>
                  </select>
                </div>
                <div class="select-clear"></div>
              </a>
              <script>window.variants && variants.markSelectedVariant();</script>
            </li>
            <li class="footerVisitedLinks showVisitedLinks"><a class="padding" onclick="clearHistory();"><i class="fas fa-history fa-fw"></i> Clear History</a></li>
          </ul>
        </div>
        <div id="footer" class="footerFooter showFooter">
	    <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
        </div>
      </div>
    </aside>

    <script src="/js/clipboard.min.js?1697343146" defer></script>
    <script src="/js/perfect-scrollbar.min.js?1697343146" defer></script>
    <script src="/js/featherlight.min.js?1697343146" defer></script>
    <script src="/js/jquery.svg.pan.zoom.js?1697343146" defer></script>
    <script src="/js/mermaid.min.js?1697343146" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{}");
    </script>
    <script src="/js/theme.js?1697343146" defer></script>
  </body>
</html>
